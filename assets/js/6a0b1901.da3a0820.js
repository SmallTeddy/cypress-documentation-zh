"use strict";(self.webpackChunkcypress_docusaurus_zh=self.webpackChunkcypress_docusaurus_zh||[]).push([[3439],{2132:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>o});var s=t(5893),r=t(1151);const i={title:"Catalog of Events",sidebar_position:10},l=void 0,d={id:"api/cypress-api/catalog-of-events",title:"Catalog of Events",description:"Cypress emits a series of events as it runs in your browser.",source:"@site/docs/api/cypress-api/catalog-of-events.mdx",sourceDirName:"api/cypress-api",slug:"/api/cypress-api/catalog-of-events",permalink:"/api/cypress-api/catalog-of-events",draft:!1,unlisted:!1,editUrl:"https://github.com/cypress-io/cypress-documentation/tree/main/docs/api/cypress-api/catalog-of-events.mdx",tags:[],version:"current",lastUpdatedAt:1732009455,formattedLastUpdatedAt:"Nov 19, 2024",sidebarPosition:10,frontMatter:{title:"Catalog of Events",sidebar_position:10},sidebar:"api",previous:{title:"writeFile",permalink:"/api/commands/writefile"},next:{title:"Custom Commands",permalink:"/api/cypress-api/custom-commands"}},c={},o=[{value:"Event Types",id:"Event-Types",level:2},{value:"App Events",id:"App-Events",level:3},{value:"Cypress Events",id:"Cypress-Events",level:3},{value:"Other Events",id:"Other-Events",level:3},{value:"Binding to Events",id:"Binding-to-Events",level:2},{value:"Cypress",id:"Cypress",level:3},{value:"cy",id:"cy",level:3},{value:"Examples",id:"Examples",level:2},{value:"Uncaught Exceptions",id:"Uncaught-Exceptions",level:3},{value:"To turn off all uncaught exception handling",id:"To-turn-off-all-uncaught-exception-handling",level:4},{value:"To conditionally turn off uncaught exception handling for a certain error",id:"To-conditionally-turn-off-uncaught-exception-handling-for-a-certain-error",level:3},{value:"To conditionally turn off uncaught exception handling unhandled promise rejections",id:"To-conditionally-turn-off-uncaught-exception-handling-unhandled-promise-rejections",level:3},{value:"To catch a single uncaught exception",id:"To-catch-a-single-uncaught-exception",level:4},{value:"Catching Test Failures",id:"Catching-Test-Failures",level:3},{value:"Debug the moment a test fails",id:"Debug-the-moment-a-test-fails",level:4},{value:"Page Navigation <E2EOnlyBadge></E2EOnlyBadge>",id:"Page-Navigation",level:3},{value:"Test that your application was redirected",id:"Test-that-your-application-was-redirected",level:4},{value:"Window Before Load <E2EOnlyBadge></E2EOnlyBadge>",id:"Window-Before-Load",level:3},{value:"Modify your Application before it loads after page transitions",id:"Modify-your-Application-before-it-loads-after-page-transitions",level:4},{value:"Window Confirm",id:"Window-Confirm",level:3},{value:"Control whether you accept or reject confirmations",id:"Control-whether-you-accept-or-reject-confirmations",level:4},{value:"Window Alert",id:"Window-Alert",level:3},{value:"Assert on the alert text",id:"Assert-on-the-alert-text",level:4},{value:"Notes",id:"Notes",level:2},{value:"Logging All Events",id:"Logging-All-Events",level:3}];function a(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...e.components},{DocsImage:t,E2EOnlyBadge:i,SupportFileConfiguration:l}=n;return t||x("DocsImage",!0),i||x("E2EOnlyBadge",!0),l||x("SupportFileConfiguration",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Cypress emits a series of events as it runs in your browser."}),"\n",(0,s.jsx)(n.p,{children:"These events are useful not only to control your application's behavior, but\nalso for debugging purposes."}),"\n",(0,s.jsx)(n.p,{children:"Here are some examples you can do with these events:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Listen for ",(0,s.jsx)(n.code,{children:"uncaught exceptions"})," and prevent Cypress from failing the test"]}),"\n",(0,s.jsxs)(n.li,{children:["Listen for ",(0,s.jsx)(n.code,{children:"alert"})," or ",(0,s.jsx)(n.code,{children:"confirm"})," calls and change the ",(0,s.jsx)(n.code,{children:"confirm"})," behavior"]}),"\n",(0,s.jsxs)(n.li,{children:["Listen for ",(0,s.jsx)(n.code,{children:"window:before:load"})," events and modify the ",(0,s.jsx)(n.code,{children:"window"})," before any of\nyour app code runs between page transitions"]}),"\n",(0,s.jsxs)(n.li,{children:["Listen for ",(0,s.jsx)(n.code,{children:"command:retry"})," events to understand why Cypress is internally\nretrying for debugging purposes"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"Event-Types",children:"Event Types"}),"\n",(0,s.jsx)(n.h3,{id:"App-Events",children:"App Events"}),"\n",(0,s.jsx)(n.p,{children:"These events come from the application currently under test (your application).\nThese are the most useful events for you to listen to."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Details"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Name:"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"uncaught:exception"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Yields:"})}),(0,s.jsxs)(n.td,{children:["the error ",(0,s.jsx)(n.strong,{children:"(Object)"}),", Mocha runnable ",(0,s.jsx)(n.strong,{children:"(Object)"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Description:"})}),(0,s.jsxs)(n.td,{children:["Fires when an uncaught exception occurs in your application. Cypress will fail the test when this fires. Return ",(0,s.jsx)(n.code,{children:"false"})," from this event and Cypress will not fail the test. Also useful for debugging purposes because the actual ",(0,s.jsx)(n.code,{children:"error"})," instance is provided to you. See our recipe ",(0,s.jsx)(n.a,{href:"/app/references/recipes#Fundamentals",children:"Handling errors"}),"."]})]})]})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Details"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Name:"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"window:confirm"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Yields:"})}),(0,s.jsxs)(n.td,{children:["the confirmation text ",(0,s.jsx)(n.strong,{children:"(String)"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Description:"})}),(0,s.jsxs)(n.td,{children:["Fires when your app calls the global ",(0,s.jsx)(n.code,{children:"window.confirm()"})," method. Cypress will auto accept confirmations. Return ",(0,s.jsx)(n.code,{children:"false"})," from this event and the confirmation will be canceled."]})]})]})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Details"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Name:"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"window:alert"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Yields:"})}),(0,s.jsxs)(n.td,{children:["the alert text ",(0,s.jsx)(n.strong,{children:"(String)"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Description:"})}),(0,s.jsxs)(n.td,{children:["Fires when your app calls the global ",(0,s.jsx)(n.code,{children:"window.alert()"})," method. Cypress will auto accept alerts. You cannot change this behavior."]})]})]})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Details"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Name:"})}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"window:before:load"})," ",(0,s.jsx)(i,{})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Yields:"})}),(0,s.jsxs)(n.td,{children:["the remote window ",(0,s.jsx)(n.strong,{children:"(Object)"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Description:"})}),(0,s.jsxs)(n.td,{children:["Fires as the page begins to load, but before any of your applications JavaScript has executed. This fires at the exact same time as ",(0,s.jsx)(n.code,{children:"cy.visit()"})," ",(0,s.jsx)(n.code,{children:"onBeforeLoad"})," callback. Useful to modify the window on a page transition."]})]})]})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Details"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Name:"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"window:load"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Yields:"})}),(0,s.jsxs)(n.td,{children:["the remote window ",(0,s.jsx)(n.strong,{children:"(Object)"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Description:"})}),(0,s.jsxs)(n.td,{children:["Fires after all your resources have finished loading after a page transition. This fires at the exact same time as a ",(0,s.jsx)(n.code,{children:"cy.visit()"})," ",(0,s.jsx)(n.code,{children:"onLoad"})," callback."]})]})]})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Details"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Name:"})}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"window:before:unload"})," ",(0,s.jsx)(i,{})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Yields:"})}),(0,s.jsxs)(n.td,{children:["the actual beforeunload event ",(0,s.jsx)(n.strong,{children:"(Object)"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Description:"})}),(0,s.jsxs)(n.td,{children:["Fires when your application is about to navigate away. The real event object is provided to you. Your app may have set a ",(0,s.jsx)(n.code,{children:"returnValue"})," on the event, which is useful to assert on."]})]})]})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Details"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Name:"})}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"window:unload"})," ",(0,s.jsx)(i,{})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Yields:"})}),(0,s.jsxs)(n.td,{children:["the actual unload event ",(0,s.jsx)(n.strong,{children:"(Object)"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Description:"})}),(0,s.jsx)(n.td,{children:"Fires when your application has unloaded and is navigating away. The real event object is provided to you. This event is not cancelable."})]})]})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Details"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Name:"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"url:changed"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Yields:"})}),(0,s.jsxs)(n.td,{children:["the new url ",(0,s.jsx)(n.strong,{children:"(String)"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Description:"})}),(0,s.jsx)(n.td,{children:"Fires whenever Cypress detects that your application's URL has changed."})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"Cypress-Events",children:"Cypress Events"}),"\n",(0,s.jsx)(n.p,{children:"These events come from Cypress as it issues commands and reacts to their state.\nThese are all useful to listen to for debugging purposes."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Details"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Name:"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"fail"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Yields:"})}),(0,s.jsxs)(n.td,{children:["the error ",(0,s.jsx)(n.strong,{children:"(Object)"}),", Mocha runnable ",(0,s.jsx)(n.strong,{children:"(Object)"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Description:"})}),(0,s.jsxs)(n.td,{children:["Fires when the test has failed. Binding to this event without rethrowing the error will prevent the test from having a 'failed' state. Subsequent commands will not be executed. However this is ",(0,s.jsx)(n.strong,{children:"strongly discouraged"}),". Tests should never legitimately fail. This event exists because it's extremely useful for debugging purposes. See our recipe ",(0,s.jsx)(n.a,{href:"/app/references/recipes#Fundamentals",children:"Handling errors"}),"."]})]})]})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Details"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Name:"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"viewport:changed"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Yields:"})}),(0,s.jsxs)(n.td,{children:["the new viewport ",(0,s.jsx)(n.strong,{children:"(Object)"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Description:"})}),(0,s.jsxs)(n.td,{children:["Fires whenever the viewport changes via a ",(0,s.jsx)(n.code,{children:"cy.viewport()"})," or naturally when Cypress resets the viewport to the default between tests. Useful for debugging purposes."]})]})]})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Details"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Name:"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"scrolled"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Yields:"})}),(0,s.jsxs)(n.td,{children:["the element or window being scrolled ",(0,s.jsx)(n.strong,{children:"(Object)"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Description:"})}),(0,s.jsxs)(n.td,{children:["Fires whenever ",(0,s.jsx)(n.strong,{children:"Cypress"})," is scrolling your application. This event is fired when Cypress is ",(0,s.jsx)(n.a,{href:"/app/core-concepts/interacting-with-elements",children:"waiting for and calculating actionability"}),". It will scroll to 'uncover' elements currently being covered. This event is extremely useful to debug why Cypress may think an element is not interactive."]})]})]})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Details"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Name:"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"command:enqueued"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Yields:"})}),(0,s.jsxs)(n.td,{children:["command properties and arguments ",(0,s.jsx)(n.strong,{children:"(Object)"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Description:"})}),(0,s.jsx)(n.td,{children:"Fires when a cy command is first invoked and enqueued to be run later. Useful for debugging purposes if you're confused about the order in which commands will execute."})]})]})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Details"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Name:"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"command:start"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Yields:"})}),(0,s.jsxs)(n.td,{children:["command instance ",(0,s.jsx)(n.strong,{children:"(Object)"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Description:"})}),(0,s.jsx)(n.td,{children:"Fires when cy begins actually running and executing your command. Useful for debugging and understanding how the command queue is async."})]})]})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Details"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Name:"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"command:end"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Yields:"})}),(0,s.jsxs)(n.td,{children:["command instance ",(0,s.jsx)(n.strong,{children:"(Object)"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Description:"})}),(0,s.jsx)(n.td,{children:"Fires when cy finishes running and executing your command. Useful for debugging and understanding how commands are handled."})]})]})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Details"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Name:"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"command:retry"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Yields:"})}),(0,s.jsxs)(n.td,{children:["retry options ",(0,s.jsx)(n.strong,{children:"(Object)"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Description:"})}),(0,s.jsxs)(n.td,{children:["Fires whenever a command begins its ",(0,s.jsx)(n.a,{href:"/app/core-concepts/retry-ability",children:"retrying routines"}),". This is called on the trailing edge after Cypress has internally waited for the retry interval. Useful to understand ",(0,s.jsx)(n.strong,{children:"why"})," a command is retrying, and generally includes the actual error causing the retry to happen. When commands fail the final error is the one that actually bubbles up to fail the test. This event is essentially to debug why Cypress is failing."]})]})]})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Details"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Name:"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"log:added"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Yields:"})}),(0,s.jsxs)(n.td,{children:["log attributes ",(0,s.jsx)(n.strong,{children:"(Object)"}),", log instance ",(0,s.jsx)(n.strong,{children:"(Object)"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Description:"})}),(0,s.jsxs)(n.td,{children:["Fires whenever a command emits this event so it can be displayed in the Command Log. Useful to see how internal cypress commands utilize the ",(0,s.jsx)(n.a,{href:"/api/cypress-api/cypress-log",children:"Cypress.log()"})," API."]})]})]})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Details"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Name:"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"log:changed"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Yields:"})}),(0,s.jsxs)(n.td,{children:["log attributes ",(0,s.jsx)(n.strong,{children:"(Object)"}),", log instance ",(0,s.jsx)(n.strong,{children:"(Object)"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Description:"})}),(0,s.jsxs)(n.td,{children:["Fires whenever a command's attributes changes. This event is debounced to prevent it from firing too quickly and too often. Useful to see how internal cypress commands utilize the ",(0,s.jsx)(n.a,{href:"/api/cypress-api/cypress-log",children:"Cypress.log()"})," API."]})]})]})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Details"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Name:"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"test:before:run"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Yields:"})}),(0,s.jsxs)(n.td,{children:["test attributes ",(0,s.jsx)(n.strong,{children:"(Object)"}),", runnable instance ",(0,s.jsx)(n.strong,{children:"(Object)"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Description:"})}),(0,s.jsxs)(n.td,{children:["Fires before the test and all ",(0,s.jsx)(n.strong,{children:"before"})," and ",(0,s.jsx)(n.strong,{children:"beforeEach"})," hooks run."]})]})]})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Details"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Name:"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"test:after:run"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Yields:"})}),(0,s.jsxs)(n.td,{children:["test attributes ",(0,s.jsx)(n.strong,{children:"(Object)"}),", runnable instance ",(0,s.jsx)(n.strong,{children:"(Object)"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Description:"})}),(0,s.jsxs)(n.td,{children:["Fires after the test and all ",(0,s.jsx)(n.strong,{children:"afterEach"})," and ",(0,s.jsx)(n.strong,{children:"after"})," hooks run."]})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"Other-Events",children:"Other Events"}),"\n",(0,s.jsx)(n.p,{children:"There are a myriad of other events Cypress fires to communicate with the Node\nserver process, automation servers, mocha, the application, and the reporter.\nThey are strictly internal to the way Cypress works and not useful for users."}),"\n",(0,s.jsx)(n.h2,{id:"Binding-to-Events",children:"Binding to Events"}),"\n",(0,s.jsxs)(n.p,{children:["Both the global ",(0,s.jsx)(n.code,{children:"Cypress"})," and ",(0,s.jsx)(n.code,{children:"cy"})," objects are standard Node event emitters.\nThat means you can use the following methods to bind and unbind from events."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://nodejs.org/api/events.html#events_emitter_on_eventname_listener",children:"on"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://nodejs.org/api/events.html#events_emitter_once_eventname_listener",children:"once"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://nodejs.org/api/events.html#events_emitter_removelistener_eventname_listener",children:"removeListener"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://nodejs.org/api/events.html#events_emitter_removealllisteners_eventname",children:"removeAllListeners"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["It's important to understand why you'd want to bind to either ",(0,s.jsx)(n.code,{children:"Cypress"})," or ",(0,s.jsx)(n.code,{children:"cy"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"Cypress",children:"Cypress"}),"\n",(0,s.jsx)(n.p,{children:"Cypress is a global object that persists for the entirety of all of your tests.\nAny events you bind to Cypress will apply to all tests, and will not be unbound\nunless you manually unbind them."}),"\n",(0,s.jsx)(n.p,{children:'This is useful when you\'re debugging and want to add a single "catch-all" event\nto track down things like test failures, or uncaught exceptions from your\napplication.'}),"\n",(0,s.jsx)(n.h3,{id:"cy",children:"cy"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"cy"})," object is bound to each individual test. Events bound to ",(0,s.jsx)(n.code,{children:"cy"})," will\n",(0,s.jsx)(n.strong,{children:"automatically"})," be removed when the test ends. You don't have to worry about\ncleanup, and your event listeners will only be called for the duration of the\nsingle test."]}),"\n",(0,s.jsx)(n.h2,{id:"Examples",children:"Examples"}),"\n",(0,s.jsx)(n.h3,{id:"Uncaught-Exceptions",children:"Uncaught Exceptions"}),"\n",(0,s.jsx)(n.h4,{id:"To-turn-off-all-uncaught-exception-handling",children:"To turn off all uncaught exception handling"}),"\n",(0,s.jsx)(l,{}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"Cypress.on('uncaught:exception', (err, runnable) => {\n  // returning false here prevents Cypress from\n  // failing the test\n  return false\n})\n"})}),"\n",(0,s.jsxs)(n.p,{children:["If an uncaught exception is thrown from a domain within a ",(0,s.jsx)(n.code,{children:"cy.origin()"})," command, the uncaught exception handler will need to added within the ",(0,s.jsx)(n.code,{children:"cy.origin()"})," command to take effect."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"cy.origin('https://example.cypress.io', () => {\n  Cypress.on('uncaught:exception', (err, runnable) => {\n    // returning false here prevents Cypress\n    // inside the cy.origin() method from failing the test\n    return false\n  })\n})\n"})}),"\n",(0,s.jsx)(n.h3,{id:"To-conditionally-turn-off-uncaught-exception-handling-for-a-certain-error",children:"To conditionally turn off uncaught exception handling for a certain error"}),"\n",(0,s.jsx)(l,{}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"Cypress.on('uncaught:exception', (err, runnable) => {\n  // we expect a 3rd party library error with message 'list not defined'\n  // and don't want to fail the test so we return false\n  if (err.message.includes('list not defined')) {\n    return false\n  }\n  // we still want to ensure there are no other unexpected\n  // errors, so we let them fail the test\n})\n"})}),"\n",(0,s.jsx)(n.h3,{id:"To-conditionally-turn-off-uncaught-exception-handling-unhandled-promise-rejections",children:"To conditionally turn off uncaught exception handling unhandled promise rejections"}),"\n",(0,s.jsx)(l,{}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"Cypress.on('uncaught:exception', (err, runnable, promise) => {\n  // when the exception originated from an unhandled promise\n  // rejection, the promise is provided as a third argument\n  // you can turn off failing the test in this case\n  if (promise) {\n    return false\n  }\n  // we still want to ensure there are no other unexpected\n  // errors, so we let them fail the test\n})\n"})}),"\n",(0,s.jsx)(n.h4,{id:"To-catch-a-single-uncaught-exception",children:"To catch a single uncaught exception"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"it('is doing something very important', (done) => {\n  // this event will automatically be unbound when this\n  // test ends because it's attached to 'cy'\n  cy.on('uncaught:exception', (err, runnable) => {\n    expect(err.message).to.include('something about the error')\n\n    // using mocha's async done callback to finish\n    // this test so we prove that an uncaught exception\n    // was thrown\n    done()\n\n    // return false to prevent the error from\n    // failing this test\n    return false\n  })\n\n  // assume this causes an error\n  cy.get('button').click()\n})\n"})}),"\n",(0,s.jsx)(n.h3,{id:"Catching-Test-Failures",children:"Catching Test Failures"}),"\n",(0,s.jsx)(n.h4,{id:"Debug-the-moment-a-test-fails",children:"Debug the moment a test fails"}),"\n",(0,s.jsxs)(n.p,{children:["If you want to debug when any test fails you'll likely want to put this in a\n",(0,s.jsx)(n.a,{href:"/app/core-concepts/writing-and-organizing-tests#Support-file",children:"supportFile"}),",\nor at the top of an individual spec file."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"Cypress.on('fail', (error, runnable) => {\n  debugger\n\n  // we now have access to the err instance\n  // and the mocha runnable this failed on\n\n  throw error // throw error to have test still fail\n})\n\nit('calls the \"fail\" callback when this test fails', () => {\n  // when this cy.get() fails the callback\n  // is invoked with the error\n  cy.get('element-that-does-not-exist')\n})\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"Page-Navigation",children:["Page Navigation ",(0,s.jsx)(i,{})]}),"\n",(0,s.jsx)(n.h4,{id:"Test-that-your-application-was-redirected",children:"Test that your application was redirected"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// app code\n$('button').on('click', (e) => {\n  // change the page programmatically\n  window.location.href = '/some/new/link'\n})\n\n// test code\nit('redirects to another page on click', (done) => {\n  // this event will automatically be unbound when this\n  // test ends because it's attached to 'cy'\n  cy.on('window:before:unload', (e) => {\n    // no return value on the event\n    expect(e.returnValue).to.be.undefined\n  })\n\n  cy.on('window:unload', (e) => {\n    // using mocha's async done callback to finish\n    // this test so we are guaranteed the application\n    // was unloaded while navigating to the new page\n    done()\n  })\n\n  // click the button causing the page redirect\n  cy.get('button').click()\n})\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"Window-Before-Load",children:["Window Before Load ",(0,s.jsx)(i,{})]}),"\n",(0,s.jsx)(n.h4,{id:"Modify-your-Application-before-it-loads-after-page-transitions",children:"Modify your Application before it loads after page transitions"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"it('can modify the window prior to page load on all pages', () => {\n  // create the stub here\n  const ga = cy.stub().as('ga')\n\n  // prevent google analytics from loading\n  // and replace it with a stub before every\n  // single page load including all new page\n  // navigations\n  cy.on('window:before:load', (win) => {\n    Object.defineProperty(win, 'ga', {\n      configurable: false,\n      get: () => ga, // always return the stub\n      set: () => {}, // don't allow actual google analytics to overwrite this property\n    })\n  })\n\n  cy\n    // window:before:load will be called here\n    .visit('/first/page')\n\n    .then((win) => {\n      // and here\n      win.location.href = '/second/page'\n    })\n\n    // and here\n    .get('a')\n    .click()\n})\n"})}),"\n",(0,s.jsx)(n.h3,{id:"Window-Confirm",children:"Window Confirm"}),"\n",(0,s.jsx)(n.h4,{id:"Control-whether-you-accept-or-reject-confirmations",children:"Control whether you accept or reject confirmations"}),"\n",(0,s.jsx)(n.p,{children:"This enables you to test how your application reacts to accepted confirmations\nand rejected confirmations."}),"\n","\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// app code\n$('button').on('click', (e) => {\n  const one = confirm('first confirm')\n\n  if (one) {\n    const two = confirm('second confirm')\n\n    if (!two) {\n      const three = confirm('third confirm')\n\n      confirm('third confirm was ' + three)\n    }\n  }\n})\n\n// test code\nit('can control application confirms', (done) => {\n  let count = 0\n\n  // make sure you bind to this **before** the\n  // confirm method is called in your application\n  //\n  // this event will automatically be unbound when this\n  // test ends because it's attached to 'cy'\n  cy.on('window:confirm', (str) => {\n    count += 1\n\n    switch (count) {\n      case 1:\n        expect(str).to.eq('first confirm')\n      // returning nothing here automatically\n      // accepts the confirmation\n      case 2:\n        expect(str).to.eq('second confirm')\n\n        // reject the confirmation\n        return false\n\n      case 3:\n        expect(str).to.eq('third confirm')\n\n        // don't have to return true but it works\n        // as well\n        return true\n\n      case 4:\n        expect(str).to.eq('third confirm was true')\n\n        // using mocha's async done callback to finish\n        // this test so we are guaranteed everything\n        // got to this point okay without throwing an error\n        done()\n    }\n  })\n\n  // click the button causing the confirm to fire\n  cy.get('button').click()\n})\n\nit('could also use a stub instead of imperative code', () => {\n  const stub = cy.stub()\n\n  // not necessary but showing for clarity\n  stub.onFirstCall().returns(undefined)\n  stub.onSecondCall().returns(false)\n  stub.onThirdCall().returns(true)\n\n  cy.on('window:confirm', stub)\n\n  cy.get('button')\n    .click()\n    .then(() => {\n      expect(stub.getCall(0)).to.be.calledWith('first confirm')\n      expect(stub.getCall(1)).to.be.calledWith('second confirm')\n      expect(stub.getCall(2)).to.be.calledWith('third confirm')\n      expect(stub.getCall(3)).to.be.calledWith('third confirm was true')\n    })\n})\n"})}),"\n","\n",(0,s.jsx)(n.h3,{id:"Window-Alert",children:"Window Alert"}),"\n",(0,s.jsx)(n.h4,{id:"Assert-on-the-alert-text",children:"Assert on the alert text"}),"\n",(0,s.jsx)(n.p,{children:"Cypress automatically accepts alerts but you can still assert on the text\ncontent."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// app code\n$('button').on('click', (e) => {\n  alert('hi')\n  alert('there')\n  alert('friend')\n})\n\nit('can assert on the alert text content', () => {\n  const stub = cy.stub()\n\n  cy.on('window:alert', stub)\n\n  cy.get('button')\n    .click()\n    .then(() => {\n      expect(stub.getCall(0)).to.be.calledWith('hi')\n      expect(stub.getCall(1)).to.be.calledWith('there')\n      expect(stub.getCall(2)).to.be.calledWith('friend')\n    })\n})\n"})}),"\n",(0,s.jsx)(n.h2,{id:"Notes",children:"Notes"}),"\n",(0,s.jsx)(n.h3,{id:"Logging-All-Events",children:"Logging All Events"}),"\n",(0,s.jsxs)(n.p,{children:["Cypress uses the ",(0,s.jsx)(n.a,{href:"https://github.com/visionmedia/debug",children:(0,s.jsx)(n.code,{children:"debug"})})," node module for\nboth the back end server process, and for everything running in the browser\n(called the driver)."]}),"\n",(0,s.jsx)(n.p,{children:"If you'd like to see (the huge) stream of events that Cypress emits you can pop\nopen your Dev Tools and write this line in the console."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"localStorage.debug = 'cypress:*'\n"})}),"\n",(0,s.jsx)(n.p,{children:"Reload the browser and turn on 'Verbose' logs to see debug messages within the\nDeveloper Tools console."}),"\n",(0,s.jsx)(t,{src:"/img/api/catalog-of-events/console-log-events-debug.png",alt:"console log events for debugging"})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}function x(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},1151:(e,n,t)=>{t.d(n,{Z:()=>d,a:()=>l});var s=t(7294);const r={},i=s.createContext(r);function l(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);
"use strict";(self.webpackChunkcypress_docusaurus_zh=self.webpackChunkcypress_docusaurus_zh||[]).push([[8505],{6158:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>c,default:()=>l,frontMatter:()=>i,metadata:()=>a,toc:()=>d});var r=n(5893),s=n(1151);const i={title:"Client Certificates"},c=void 0,a={id:"app/references/client-certificates",title:"Client Certificates",description:"Configure certificate authority (CA) and client certificates to use within tests",source:"@site/docs/app/references/client-certificates.mdx",sourceDirName:"app/references",slug:"/app/references/client-certificates",permalink:"/app/references/client-certificates",draft:!1,unlisted:!1,editUrl:"https://github.com/cypress-io/cypress-documentation/tree/main/docs/app/references/client-certificates.mdx",tags:[],version:"current",lastUpdatedAt:1732009455,formattedLastUpdatedAt:"Nov 19, 2024",frontMatter:{title:"Client Certificates"},sidebar:"app",previous:{title:"Changelog",permalink:"/app/references/changelog"},next:{title:"Command Line",permalink:"/app/references/command-line"}},o={},d=[{value:"Syntax",id:"Syntax",level:2},{value:"Usage",id:"Usage",level:2},{value:"History",id:"History",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.a)(),...e.components},{CypressConfigFileTabs:n,Icon:i}=t;return n||p("CypressConfigFileTabs",!0),i||p("Icon",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"Configure certificate authority (CA) and client certificates to use within tests\non a per-URL basis."}),"\n",(0,r.jsxs)(t.admonition,{type:"info",children:[(0,r.jsx)("strong",{children:"Document Scope"}),(0,r.jsx)(t.p,{children:"This document merely offers guidance on how to specify certificate file paths\nfor given test URLs. Details around the content and purpose of such files are\nnot within the scope of Cypress documentation."})]}),"\n",(0,r.jsx)(t.h2,{id:"Syntax",children:"Syntax"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(i,{name:"angle-right"})," ",(0,r.jsxs)(t.strong,{children:["clientCertificates ",(0,r.jsx)(t.em,{children:"(Object[])"})]})]}),"\n",(0,r.jsx)(t.p,{children:"An array of objects defining the certificates. Each object must have the\nfollowing properties"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Property"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"url"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"String"})}),(0,r.jsxs)(t.td,{children:["URL to match requests against. Wildcards following ",(0,r.jsx)(t.a,{href:"https://github.com/isaacs/minimatch",children:"minimatch"})," rules are supported."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"ca"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"Array"})}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.em,{children:"(Optional)"})," Paths to one or more CA files to validate certs against, relative to project root."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"certs"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"Object[]"})}),(0,r.jsx)(t.td,{children:"A PEM format certificate/private key pair or PFX certificate container"})]})]})]}),"\n",(0,r.jsxs)(t.p,{children:["Each object in the ",(0,r.jsx)(t.code,{children:"certs"})," array can define either a ",(0,r.jsx)(t.strong,{children:"PEM format\ncertificate/private key pair"})," or a ",(0,r.jsx)(t.strong,{children:"PFX certificate container"}),"."]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"A PEM format certificate/private key pair can have the following properties:"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Property"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"cert"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"String"})}),(0,r.jsx)(t.td,{children:"Path to the certificate file, relative to project root."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"key"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"String"})}),(0,r.jsx)(t.td,{children:"Path to the private key file, relative to project root."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"passphrase"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"String"})}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.em,{children:"(Optional)"})," Path to a text file containing the passphrase, relative to project root."]})]})]})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"A PFX certificate container can have the following properties:"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Property"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"pfx"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"String"})}),(0,r.jsx)(t.td,{children:"Path to the certificate container, relative to project root."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"passphrase"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"String"})}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.em,{children:"(Optional)"})," Path to a text file containing the passphrase, relative to project root."]})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"Usage",children:"Usage"}),"\n",(0,r.jsxs)(t.p,{children:["To configure CA / client certificates within your Cypress configuration, you can\nadd the ",(0,r.jsx)(t.code,{children:"clientCertificates"})," key to define an array of client certificates as\nshown below:"]}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",metastring:"",children:"const { defineConfig } = require('cypress')\n\nmodule.exports = defineConfig({\n  clientCertificates: [\n    {\n      url: 'https://a.host.com',\n      ca: ['certs/ca.pem'],\n      certs: [\n        {\n          cert: 'certs/cert.pem',\n          key: 'certs/private.key',\n          passphrase: 'certs/pem-passphrase.txt',\n        },\n      ],\n    },\n    {\n      url: 'https://b.host.com/a_base_route/**',\n      ca: [],\n      certs: [\n        {\n          pfx: '/home/tester/certs/cert.pfx',\n          passphrase: '/home/tester/certs/pfx-passphrase.txt',\n        },\n      ],\n    },\n    {\n      url: 'https://a.host.*.com/',\n      ca: [],\n      certs: [\n        {\n          pfx: 'certs/cert.pfx',\n          passphrase: 'certs/pfx-passphrase.txt',\n        },\n      ],\n    },\n  ],\n})\n"})}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",metastring:"",children:"import { defineConfig } from 'cypress'\n\nexport default defineConfig({\n  clientCertificates: [\n    {\n      url: 'https://a.host.com',\n      ca: ['certs/ca.pem'],\n      certs: [\n        {\n          cert: 'certs/cert.pem',\n          key: 'certs/private.key',\n          passphrase: 'certs/pem-passphrase.txt',\n        },\n      ],\n    },\n    {\n      url: 'https://b.host.com/a_base_route/**',\n      ca: [],\n      certs: [\n        {\n          pfx: '/home/tester/certs/cert.pfx',\n          passphrase: '/home/tester/certs/pfx-passphrase.txt',\n        },\n      ],\n    },\n    {\n      url: 'https://a.host.*.com/',\n      ca: [],\n      certs: [\n        {\n          pfx: 'certs/cert.pfx',\n          passphrase: 'certs/pfx-passphrase.txt',\n        },\n      ],\n    },\n  ],\n})\n"})})]}),"\n",(0,r.jsx)(t.h2,{id:"History",children:"History"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Version"}),(0,r.jsx)(t.th,{children:"Changes"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"/app/references/changelog#8-0-0",children:"8.0.0"})}),(0,r.jsx)(t.td,{children:"Added Client Certificates configuration options"})]})})]})]})}function l(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}function p(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},1151:(e,t,n)=>{n.d(t,{Z:()=>a,a:()=>c});var r=n(7294);const s={},i=r.createContext(s);function c(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);
"use strict";(self.webpackChunkcypress_docusaurus_zh=self.webpackChunkcypress_docusaurus_zh||[]).push([[7388],{5987:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>t,metadata:()=>r,toc:()=>a});var o=s(5893),c=s(1151);const t={title:"focus"},i=void 0,r={id:"api/commands/focus",title:"focus",description:"Focus on a DOM element.",source:"@site/docs/api/commands/focus.mdx",sourceDirName:"api/commands",slug:"/api/commands/focus",permalink:"/api/commands/focus",draft:!1,unlisted:!1,editUrl:"https://github.com/cypress-io/cypress-documentation/tree/main/docs/api/commands/focus.mdx",tags:[],version:"current",lastUpdatedAt:1732009455,formattedLastUpdatedAt:"Nov 19, 2024",frontMatter:{title:"focus"},sidebar:"api",previous:{title:"fixture",permalink:"/api/commands/fixture"},next:{title:"focused",permalink:"/api/commands/focused"}},l={},a=[{value:"Syntax",id:"Syntax",level:2},{value:"Usage",id:"Usage",level:3},{value:"Arguments",id:"Arguments",level:3},{value:"Yields <Icon></Icon>",id:"Yields",level:3},{value:"Examples",id:"Examples",level:2},{value:"No Args",id:"No-Args",level:3},{value:"Focus on an input",id:"Focus-on-an-input",level:4},{value:"Focus, type, and blur a textarea",id:"Focus-type-and-blur-a-textarea",level:4},{value:"Notes",id:"Notes",level:2},{value:"Actionability",id:"Actionability",level:3},{value:"Focus is not an action command",id:"Focus-is-not-an-action-command",level:4},{value:"Blur Events",id:"Blur-Events",level:3},{value:"Cypress blurs other focused elements first",id:"Cypress-blurs-other-focused-elements-first",level:4},{value:"Focusable",id:"Focusable",level:3},{value:"Can only be called on a valid focusable element",id:"Can-only-be-called-on-a-valid-focusable-element",level:4},{value:"Timeouts",id:"Notes-Timeouts",level:3},{value:"Can time out because your browser did not receive any focus events",id:"Can-time-out-because-your-browser-did-not-receive-any-focus-events",level:4},{value:"Rules",id:"Rules",level:2},{value:"Requirements <Icon></Icon>",id:"Requirements",level:3},{value:"Assertions <Icon></Icon>",id:"Assertions",level:3},{value:"Timeouts <Icon></Icon>",id:"Timeouts",level:3},{value:"Command Log",id:"Command-Log",level:2},{value:"See also",id:"See-also",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.a)(),...e.components},{DocsImage:s,Icon:t}=n;return s||h("DocsImage",!0),t||h("Icon",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"Focus on a DOM element."}),"\n",(0,o.jsxs)(n.p,{children:["It is ",(0,o.jsx)(n.a,{href:"/app/core-concepts/retry-ability#Only-queries-are-retried",children:"unsafe"})," to\nchain further commands that rely on the subject after ",(0,o.jsx)(n.code,{children:".focus()"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"Syntax",children:"Syntax"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:".focus()\n.focus(options)\n"})}),"\n",(0,o.jsx)(n.h3,{id:"Usage",children:"Usage"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(t,{name:"check-circle",color:"green"})," ",(0,o.jsx)(n.strong,{children:"Correct Usage"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"cy.get('input').first().focus() // Focus on the first input\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(t,{name:"exclamation-triangle",color:"red"})," ",(0,o.jsx)(n.strong,{children:"Incorrect Usage"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"cy.focus('#search') // Errors, cannot be chained off 'cy'\ncy.window().focus() // Errors, 'window' does not yield DOM element\n"})}),"\n",(0,o.jsx)(n.h3,{id:"Arguments",children:"Arguments"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(t,{name:"angle-right"})," ",(0,o.jsxs)(n.strong,{children:["options ",(0,o.jsx)(n.em,{children:"(Object)"})]})]}),"\n",(0,o.jsxs)(n.p,{children:["Pass in an options object to change the default behavior of ",(0,o.jsx)(n.code,{children:".focus()"}),"."]}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Option"}),(0,o.jsx)(n.th,{children:"Default"}),(0,o.jsx)(n.th,{children:"Description"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"log"})}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"true"})}),(0,o.jsxs)(n.td,{children:["Displays the command in the ",(0,o.jsx)(n.a,{href:"/app/core-concepts/open-mode#Command-Log",children:"Command log"})]})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"timeout"})}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.a,{href:"/app/references/configuration#Timeouts",children:(0,o.jsx)(n.code,{children:"defaultCommandTimeout"})})}),(0,o.jsxs)(n.td,{children:["Time to wait for ",(0,o.jsx)(n.code,{children:".focus()"})," to resolve before ",(0,o.jsx)(n.a,{href:"#Timeouts",children:"timing out"})]})]})]})]}),"\n",(0,o.jsxs)(n.h3,{id:"Yields",children:["Yields ",(0,o.jsx)(n.a,{href:"/app/core-concepts/introduction-to-cypress#Subject-Management",children:(0,o.jsx)(t,{name:"question-circle"})})]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:".focus()"})," yields the same subject it was given."]}),"\n",(0,o.jsxs)(n.li,{children:["It is ",(0,o.jsx)(n.a,{href:"/app/core-concepts/retry-ability#Only-queries-are-retried",children:"unsafe"}),"\nto chain further commands that rely on the subject after ",(0,o.jsx)(n.code,{children:".focus()"}),"."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"Examples",children:"Examples"}),"\n",(0,o.jsx)(n.h3,{id:"No-Args",children:"No Args"}),"\n",(0,o.jsx)(n.h4,{id:"Focus-on-an-input",children:"Focus on an input"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"cy.get('[type=\"input\"]').focus()\n"})}),"\n",(0,o.jsx)(n.h4,{id:"Focus-type-and-blur-a-textarea",children:"Focus, type, and blur a textarea"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"// yields the <textarea> for further chaining\ncy.get('textarea').focus().type('Nice Product!').blur()\n"})}),"\n",(0,o.jsx)(n.h2,{id:"Notes",children:"Notes"}),"\n",(0,o.jsx)(n.h3,{id:"Actionability",children:"Actionability"}),"\n",(0,o.jsx)(n.h4,{id:"Focus-is-not-an-action-command",children:"Focus is not an action command"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:".focus()"})," is not implemented like other action commands, and does not follow\nthe same rules of\n",(0,o.jsx)(n.a,{href:"/app/core-concepts/interacting-with-elements",children:"waiting for actionability"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:".focus()"}),' is a helpful command used as a shortcut. Normally there\'s no way for\na user to "focus" an element without causing another action or side effect.\nTypically the user would have to click or tab to this element.']}),"\n",(0,o.jsxs)(n.p,{children:["Oftentimes using ",(0,o.jsx)(n.code,{children:".focus()"})," directly is more concise and conveys what you're\ntrying to test."]}),"\n",(0,o.jsxs)(n.p,{children:["If you want the other guarantees of waiting for an element to become actionable,\nyou should use a different command like ",(0,o.jsx)(n.a,{href:"/api/commands/click",children:(0,o.jsx)(n.code,{children:".click()"})}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"Blur-Events",children:"Blur Events"}),"\n",(0,o.jsx)(n.h4,{id:"Cypress-blurs-other-focused-elements-first",children:"Cypress blurs other focused elements first"}),"\n",(0,o.jsxs)(n.p,{children:["If there is currently a different DOM element with focus, Cypress issues a\n",(0,o.jsx)(n.code,{children:"blur"})," event to that element before running the ",(0,o.jsx)(n.code,{children:".focus()"})," command."]}),"\n",(0,o.jsx)(n.h3,{id:"Focusable",children:"Focusable"}),"\n",(0,o.jsx)(n.h4,{id:"Can-only-be-called-on-a-valid-focusable-element",children:"Can only be called on a valid focusable element"}),"\n",(0,o.jsxs)(n.p,{children:["Ensure the element you are trying to call ",(0,o.jsx)(n.code,{children:".focus()"})," on is a\n",(0,o.jsx)(n.a,{href:"https://www.w3.org/TR/html5/editing.html#focusable",children:"focusable element"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"Notes-Timeouts",children:"Timeouts"}),"\n",(0,o.jsx)(n.h4,{id:"Can-time-out-because-your-browser-did-not-receive-any-focus-events",children:"Can time out because your browser did not receive any focus events"}),"\n",(0,o.jsx)(n.p,{children:"If you see this error, you may want to ensure that the main browser window is\ncurrently focused. This means not being focused in debugger or any other window\nwhen the command is run."}),"\n",(0,o.jsx)(n.p,{children:"Internally Cypress does account for this, and will polyfill the blur events when\nnecessary to replicate what the browser does. Unfortunately the browser will\nstill behave differently when not in focus - for instance it may throttle async\nevents. Your best bet here is to keep Cypress focused when working on a test."}),"\n",(0,o.jsx)(n.h2,{id:"Rules",children:"Rules"}),"\n",(0,o.jsxs)(n.h3,{id:"Requirements",children:["Requirements ",(0,o.jsx)(n.a,{href:"/app/core-concepts/introduction-to-cypress#Chains-of-Commands",children:(0,o.jsx)(t,{name:"question-circle"})})]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:".focus()"})," requires being chained off a command that yields DOM element(s)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:".focus()"})," requires the element to be able to receive focus."]}),"\n"]}),"\n",(0,o.jsxs)(n.h3,{id:"Assertions",children:["Assertions ",(0,o.jsx)(n.a,{href:"/app/core-concepts/introduction-to-cypress#Assertions",children:(0,o.jsx)(t,{name:"question-circle"})})]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:".focus()"})," will automatically wait for assertions you have chained to pass."]}),"\n"]}),"\n",(0,o.jsxs)(n.h3,{id:"Timeouts",children:["Timeouts ",(0,o.jsx)(n.a,{href:"/app/core-concepts/introduction-to-cypress#Timeouts",children:(0,o.jsx)(t,{name:"question-circle"})})]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:".focus()"})," can time out waiting for assertions you've added to pass."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"Command-Log",children:"Command Log"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.em,{children:"Focus the textarea"})})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"cy.get('[name=\"comment\"]').focus()\n"})}),"\n",(0,o.jsx)(n.p,{children:"The commands above will display in the Command Log as:"}),"\n",(0,o.jsx)(s,{src:"/img/api/focus/get-input-then-focus.png",alt:"Command Log focus"}),"\n",(0,o.jsxs)(n.p,{children:["When clicking on the ",(0,o.jsx)(n.code,{children:"focus"})," command within the command log, the console outputs\nthe following:"]}),"\n",(0,o.jsx)(s,{src:"/img/api/focus/console-log-textarea-that-was-focused-on.png",alt:"console.log focus"}),"\n",(0,o.jsx)(n.h2,{id:"See-also",children:"See also"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/api/commands/blur",children:(0,o.jsx)(n.code,{children:".blur()"})})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/api/commands/click",children:(0,o.jsx)(n.code,{children:".click()"})})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/api/commands/focused",children:(0,o.jsx)(n.code,{children:"cy.focused()"})})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/api/commands/type",children:(0,o.jsx)(n.code,{children:".type()"})})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,c.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}function h(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},1151:(e,n,s)=>{s.d(n,{Z:()=>r,a:()=>i});var o=s(7294);const c={},t=o.createContext(c);function i(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:i(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);
"use strict";(self.webpackChunkcypress_docusaurus_zh=self.webpackChunkcypress_docusaurus_zh||[]).push([[1190],{6240:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>d});var o=n(5893),t=n(1151);const r={title:"Data Storage and Controls | Cypress Cloud",description:"Learn how to mask and control test data that is sent to Cypress Cloud",sidebar_position:80,sidebar_label:"Data Storage and Controls"},a=void 0,i={id:"cloud/account-management/data-storage-and-masking",title:"Data Storage and Controls | Cypress Cloud",description:"Learn how to mask and control test data that is sent to Cypress Cloud",source:"@site/docs/cloud/account-management/data-storage-and-masking.mdx",sourceDirName:"cloud/account-management",slug:"/cloud/account-management/data-storage-and-masking",permalink:"/cloud/account-management/data-storage-and-masking",draft:!1,unlisted:!1,editUrl:"https://github.com/cypress-io/cypress-documentation/tree/main/docs/cloud/account-management/data-storage-and-masking.mdx",tags:[],version:"current",lastUpdatedAt:1732009455,formattedLastUpdatedAt:"Nov 19, 2024",sidebarPosition:80,frontMatter:{title:"Data Storage and Controls | Cypress Cloud",description:"Learn how to mask and control test data that is sent to Cypress Cloud",sidebar_position:80,sidebar_label:"Data Storage and Controls"},sidebar:"cloud",previous:{title:"Billing & Usage",permalink:"/cloud/account-management/billing-and-usage"},next:{title:"FAQ",permalink:"/cloud/faq"}},l={},d=[{value:"<Icon></Icon> What you&#39;ll learn",id:"What-youll-learn",level:5},{value:"Types of Data",id:"Types-of-Data",level:2},{value:"Project access controls",id:"Project-access-controls",level:3},{value:"Test Replay controls",id:"Test-Replay-controls",level:3},{value:"Disable Test Replay",id:"Disable-Test-Replay",level:4},{value:"Screenshot controls",id:"Screenshot-controls",level:3},{value:"Blackout elements in screenshots",id:"Blackout-elements-in-screenshots",level:4},{value:"Remove Cypress Command Log from screenshots",id:"Remove-Cypress-Command-Log-from-screenshots",level:4},{value:"Video controls",id:"Video-controls",level:3},{value:"Disable video upload",id:"Disable-video-upload",level:4},{value:"Cypress Command Log controls",id:"Cypress-Command-Log-controls",level:3},{value:"Turn off Cypress Command Log rendering",id:"Turn-off-Cypress-Command-Log-rendering",level:4},{value:"Mask data in the Cypress Command Log",id:"Mask-data-in-the-Cypress-Command-Log",level:4},{value:"<code>log: false</code> for Cypress commands",id:"log-false-for-Cypress-commands",level:5},{value:"Disable logging of XHR/Fetch requests",id:"Disable-logging-of-XHRFetch-requests",level:5},{value:"Mask Cypress commands in the Cypress Command Log",id:"Mask-Cypress-commands-in-the-Cypress-Command-Log",level:5},{value:"Network requests controls",id:"Network-requests-controls",level:3},{value:"See Also",id:"See-Also",level:2}];function c(e){const s={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.a)(),...e.components},{DocsImage:n,Icon:r}=s;return n||p("DocsImage",!0),r||p("Icon",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s.admonition,{type:"info",children:[(0,o.jsxs)(s.h5,{id:"What-youll-learn",children:[(0,o.jsx)(r,{name:"question-circle",color:"#4BBFD2"})," What you'll learn"]}),(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"What data is stored in Cypress Cloud"}),"\n",(0,o.jsx)(s.li,{children:"How to control what data is sent to Cypress Cloud"}),"\n",(0,o.jsx)(s.li,{children:"How to mask data in screenshots and videos"}),"\n",(0,o.jsx)(s.li,{children:"How to control what is shown in the Cypress Command Log and network requests"}),"\n"]})]}),"\n",(0,o.jsx)(s.admonition,{type:"caution",children:(0,o.jsxs)(s.p,{children:["Please refer to the ",(0,o.jsx)(s.a,{href:"https://cloud.cypress.io/terms-of-use",children:"Cypress Cloud Terms of Use"})," and our ",(0,o.jsx)(s.a,{href:"https://www.cypress.io/security/",children:"Security & Compliance"})," guide for more specifics around reasonable use of Cypress Cloud, data storage and security at Cypress."]})}),"\n",(0,o.jsxs)(s.p,{children:["When you run Cypress via ",(0,o.jsx)(s.code,{children:"cypress run"})," and pass the ",(0,o.jsx)(s.code,{children:"--record"})," flag, the following data is stored in Cypress Cloud for every run:"]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Standard output in the terminal"}),"\n",(0,o.jsx)(s.li,{children:"Test results"}),"\n",(0,o.jsx)(s.li,{children:"Test definitions"}),"\n",(0,o.jsx)(s.li,{children:"Cypress configuration (minus Cypress environment variables)"}),"\n",(0,o.jsx)(s.li,{children:"Screenshots"}),"\n",(0,o.jsx)(s.li,{children:"Videos"}),"\n",(0,o.jsx)(s.li,{children:"OS environment variables related to CI and git information"}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["When ",(0,o.jsx)(s.a,{href:"/cloud/features/test-replay",children:"Test Replay"})," capturing is enabled, the additional data outlined below will be sent to Cypress Cloud. ",(0,o.jsx)(s.a,{href:"/cloud/features/test-replay#Opt-out-of-Test-Replay",children:"See our guide on disabling Test Replay."})]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"The rendered DOM and CSS styles for the application under test"}),"\n",(0,o.jsx)(s.li,{children:"Cypress commands and events represented in the Command Log"}),"\n",(0,o.jsx)(s.li,{children:"Network traffic within your application under test"}),"\n",(0,o.jsx)(s.li,{children:"Browser console logs"}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:"Cypress Cloud does not capture anything related to the code of your application under test or the code within any repositories that are associated with your project."}),"\n",(0,o.jsx)(s.p,{children:"You, the customer, own and are responsible for your test content. We trust that customers will make decisions about the appropriateness of data to use in testing and will avoid use of PII, PHI, or other types of protected information. Cypress makes commercially reasonable efforts to protect confidentiality of information that is provided to Cypress Cloud."}),"\n",(0,o.jsx)(s.h2,{id:"Types-of-Data",children:"Types of Data"}),"\n",(0,o.jsx)(s.p,{children:"We understand that controlling what data is sent to Cypress Cloud is important to our users. Cypress provides a number of ways to control what data is sent to Cypress Cloud."}),"\n",(0,o.jsxs)(s.p,{children:["If you'd like more granular control over what data is sent to Cypress Cloud, please ",(0,o.jsx)(s.a,{href:"https://www.cypress.io/contact/",children:"contact us"})," to discuss your needs."]}),"\n",(0,o.jsx)(s.h3,{id:"Project-access-controls",children:"Project access controls"}),"\n",(0,o.jsxs)(s.p,{children:["Cypress Cloud offers controls around the visibility of a project. You can set a project to be public or private. ",(0,o.jsx)(s.a,{href:"/cloud/account-management/projects#Public-vs-Private",children:"See project access control settings."})]}),"\n",(0,o.jsx)(s.p,{children:"Setting a project to private means that only the users explicitly invited to the organization will have visibility into the project, its runs, and any data captured by Cypress."}),"\n",(0,o.jsx)(s.h3,{id:"Test-Replay-controls",children:"Test Replay controls"}),"\n",(0,o.jsx)(s.h4,{id:"Disable-Test-Replay",children:"Disable Test Replay"}),"\n",(0,o.jsxs)(s.p,{children:["You can disable capturing data in Test Replay per project by following ",(0,o.jsx)(s.a,{href:"/cloud/features/test-replay#Opt-out-of-Test-Replay",children:"this guide"}),". This means Test Replay will not be available for viewing or debugging in the project. This will prevent Cypress Cloud from capturing the following data:"]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"The rendered DOM and CSS styles for the application under test"}),"\n",(0,o.jsx)(s.li,{children:"Cypress commands and events represented in the Command Log"}),"\n",(0,o.jsx)(s.li,{children:"Network traffic within your application under test"}),"\n",(0,o.jsx)(s.li,{children:"Browser console logs"}),"\n"]}),"\n",(0,o.jsx)(s.h3,{id:"Screenshot-controls",children:"Screenshot controls"}),"\n",(0,o.jsx)(s.h4,{id:"Blackout-elements-in-screenshots",children:"Blackout elements in screenshots"}),"\n",(0,o.jsxs)(s.p,{children:["Cypress offers an option to black out (mask) an array of elements from screenshots. ",(0,o.jsx)(s.a,{href:"/api/commands/screenshot#Arguments",children:"See screenshot API docs."})," This allows you to black out specific elements on screenshots so that they will not be visible in the locally saved screenshots or to any users that have access to the run in Cypress Cloud."]}),"\n",(0,o.jsxs)(s.p,{children:["Add a control to your ",(0,o.jsx)(s.a,{href:"/app/references/configuration#Testing-Type-Specific-Options",children:"support file"})," to set the default blackout options for all screenshots."]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-js",children:"before(() => {\n  Cypress.Screenshot.defaults({\n    // blackout all elements with 'mask-cy' attribute\n    blackout: ['mask-cy'],\n  })\n})\n"})}),"\n",(0,o.jsx)(s.p,{children:"Add a control for a specific screenshot to blackout specific elements."}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-js",children:"it('admin page loads', () => {\n  cy.visit('/admin')\n  cy.screenshot({\n    blackout: ['.user-name'],\n  })\n})\n"})}),"\n",(0,o.jsx)(s.h4,{id:"Remove-Cypress-Command-Log-from-screenshots",children:"Remove Cypress Command Log from screenshots"}),"\n",(0,o.jsxs)(s.p,{children:["Cypress offers an option to hide the Cypress Command Log from screenshots so that no information from that area will be captured in screenshots. See the ",(0,o.jsx)(s.a,{href:"/api/commands/screenshot#Arguments",children:(0,o.jsx)(s.code,{children:"cy.screenshot()"})})," command for more information."]}),"\n",(0,o.jsxs)(s.p,{children:["Add a control to your ",(0,o.jsx)(s.a,{href:"/app/references/configuration#Testing-Type-Specific-Options",children:"support file"})," to set the default capture options for all screenshots."]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-js",children:"before(() => {\n  Cypress.Screenshot.defaults({\n    capture: 'viewport', // or fullPage\n  })\n})\n"})}),"\n",(0,o.jsx)(s.p,{children:"Add a control for a specific screenshot to only capture the application under test."}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-js",children:"it('sign in page', () => {\n  cy.visit('/sign-in')\n  cy.screenshot({\n    capture: 'viewport', // or fullPage\n  })\n})\n"})}),"\n",(0,o.jsx)(s.h3,{id:"Video-controls",children:"Video controls"}),"\n",(0,o.jsx)(s.h4,{id:"Disable-video-upload",children:"Disable video upload"}),"\n",(0,o.jsxs)(s.p,{children:["You can delete videos that are recorded when you are passing ",(0,o.jsx)(s.code,{children:"video: true"})," by following ",(0,o.jsx)(s.a,{href:"/app/guides/screenshots-and-videos#Control-which-videos-to-keep-and-upload-to-Cypress-Cloud",children:"this guide to control what is uploaded to Cypress Cloud"}),"."]}),"\n",(0,o.jsx)(s.h3,{id:"Cypress-Command-Log-controls",children:"Cypress Command Log controls"}),"\n",(0,o.jsx)(s.h4,{id:"Turn-off-Cypress-Command-Log-rendering",children:"Turn off Cypress Command Log rendering"}),"\n",(0,o.jsxs)(s.p,{children:["You can disable showing the entirety of the Cypress Command Log as well as the Application under Test (AUT) controls in your tests to prevent all test content from being shown and recorded in any screenshot or video by passing ",(0,o.jsx)(s.code,{children:"--no-runner-ui"})," via the CLI while running Cypress tests. See ",(0,o.jsx)(s.a,{href:"/app/references/command-line#Options",children:"Cypress Command Line options"}),". This means that the AUT will be the only thing that is rendered while running tests, so the only thing that is captured in screenshots and videos."]}),"\n",(0,o.jsxs)(s.p,{children:["Note that when ",(0,o.jsx)(s.code,{children:"--no-runner-ui"})," is set, data from the Cypress Command Log will still be sent to Cypress Cloud to be generated and displayed in Test Replay if it is enabled. See ",(0,o.jsx)(s.a,{href:"/cloud/features/test-replay#Opt-out-of-Test-Replay",children:"Disable Test Replay"})," for more information."]}),"\n",(0,o.jsx)(s.h4,{id:"Mask-data-in-the-Cypress-Command-Log",children:"Mask data in the Cypress Command Log"}),"\n",(0,o.jsx)(s.p,{children:"There are multiple ways to mask data in the Cypress Command Log. Note that when these strategies are used, data within test definitions will still be sent to Cypress Cloud."}),"\n",(0,o.jsxs)(s.h5,{id:"log-false-for-Cypress-commands",children:[(0,o.jsx)(s.code,{children:"log: false"})," for Cypress commands"]}),"\n",(0,o.jsxs)(s.p,{children:["You can pass ",(0,o.jsx)(s.code,{children:"log: false"})," as an option to Cypress-specific commands in your tests to prevent the data from being shown visibly in the Cypress Command Log and being shown in any captured screenshots or videos."]}),"\n",(0,o.jsx)(s.h5,{id:"Disable-logging-of-XHRFetch-requests",children:"Disable logging of XHR/Fetch requests"}),"\n",(0,o.jsxs)(s.p,{children:["By default, Cypress logs all requests that match any ",(0,o.jsx)(s.a,{href:"/api/commands/intercept",children:(0,o.jsx)(s.code,{children:"cy.intercept()"})})," in the Cypress Command Log, as well as all XMLHttpRequests and fetch requests. You can use ",(0,o.jsx)(s.code,{children:"cy.intercept()"})," to disable these logs by passing ",(0,o.jsx)(s.code,{children:"{ log: false }"})," in the second parameter. See the ",(0,o.jsx)(s.a,{href:"/api/commands/intercept#Disabling-logs-for-a-request",children:(0,o.jsx)(s.code,{children:"cy.intercept()"})})," command for more information."]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-js",children:"before(() => {\n  // disable Cypress's default behavior of logging all XMLHttpRequests and fetches\n  cy.intercept({ resourceType: /xhr|fetch/ }, { log: false })\n})\n"})}),"\n",(0,o.jsx)(s.h5,{id:"Mask-Cypress-commands-in-the-Cypress-Command-Log",children:"Mask Cypress commands in the Cypress Command Log"}),"\n",(0,o.jsxs)(s.p,{children:["Users can mask passwords in the Cypress Command Log by using a custom command like the code below. ",(0,o.jsxs)(s.a,{href:"/api/cypress-api/custom-commands#Overwrite-type-command",children:["See our guide on masking the contents of the ",(0,o.jsx)(s.code,{children:".type()"})," command."]})]}),"\n",(0,o.jsx)(n,{src:"/img/api/custom-commands/custom-command-type-masked-password.png",alt:"Cypress command log showing masked password as asterisks within the type command"}),"\n",(0,o.jsx)(s.h3,{id:"Network-requests-controls",children:"Network requests controls"}),"\n",(0,o.jsxs)(s.p,{children:["Cypress allows users to block requests from specified hosts. ",(0,o.jsx)(s.a,{href:"/app/references/configuration#blockHosts",children:"See our blockHosts configuration guide."})]}),"\n",(0,o.jsx)(n,{src:"/img/app/references/v10/blocked-host.png",alt:"Network tab of dev tools showing blocked host"}),"\n",(0,o.jsx)(s.h2,{id:"See-Also",children:"See Also"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.a,{href:"/cloud/faq",children:"Cypress Cloud FAQ"})}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,t.a)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}function p(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},1151:(e,s,n)=>{n.d(s,{Z:()=>i,a:()=>a});var o=n(7294);const t={},r=o.createContext(t);function a(e){const s=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),o.createElement(r.Provider,{value:s},e.children)}}}]);
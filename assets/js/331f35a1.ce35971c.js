"use strict";(self.webpackChunkcypress_docusaurus_zh=self.webpackChunkcypress_docusaurus_zh||[]).push([[2077],{3360:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var s=t(5893),r=t(1151);const i={title:"Branch Review",sidebar_position:50},a=void 0,l={id:"cloud/features/branch-review",title:"Branch Review",description:"What you'll learn",source:"@site/docs/cloud/features/branch-review.mdx",sourceDirName:"cloud/features",slug:"/cloud/features/branch-review",permalink:"/cloud/features/branch-review",draft:!1,unlisted:!1,editUrl:"https://github.com/cypress-io/cypress-documentation/tree/main/docs/cloud/features/branch-review.mdx",tags:[],version:"current",lastUpdatedAt:1732009455,formattedLastUpdatedAt:"Nov 19, 2024",sidebarPosition:50,frontMatter:{title:"Branch Review",sidebar_position:50},sidebar:"cloud",previous:{title:"Test Replay",permalink:"/cloud/features/test-replay"},next:{title:"Flake Management",permalink:"/cloud/features/flaky-test-management"}},o={},c=[{value:"<Icon></Icon> What you&#39;ll learn",id:"What-youll-learn",level:5},{value:"Getting Started",id:"Getting-Started",level:2},{value:"Accessing Branch Review",id:"Accessing-Branch-Review",level:3},{value:"Latest Runs",id:"Latest-Runs",level:4},{value:"Branch Details",id:"Branch-Details",level:2},{value:"View Options",id:"View-Options",level:3},{value:"Review Header",id:"Review-Header",level:3},{value:"Review Test Status",id:"Review-Test-Status",level:3},{value:"Review Test Comparison",id:"Review-Test-Comparison",level:3},{value:"GitHub Pull Request Comments",id:"GitHub-Pull-Request-Comments",level:2},{value:"Troubleshooting",id:"Troubleshooting",level:2},{value:"Note on Available Data",id:"Note-on-Available-Data",level:3},{value:"Best Practices",id:"Best-Practices",level:2},{value:"Grouping Test Runs",id:"Grouping-Test-Runs",level:3},{value:"See Also",id:"See-Also",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...e.components},{Badge:t,DocsImage:i,Icon:a}=n;return t||u("Badge",!0),i||u("DocsImage",!0),a||u("Icon",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsxs)(n.h5,{id:"What-youll-learn",children:[(0,s.jsx)(a,{name:"question-circle",color:"#4BBFD2"})," What you'll learn"]}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"How Branch Review surfaces the impact of pull requests on your test suite"}),"\n",(0,s.jsx)(n.li,{children:"How to compare test results between branches in Cypress Cloud"}),"\n",(0,s.jsx)(n.li,{children:"Best practices for grouping test runs"}),"\n"]})]}),"\n",(0,s.jsx)(n.p,{children:"Cypress Branch Review is designed to elevate your pull request review workflow. It allows you to quickly identify the impact a pull request might have on your test suite in a single view. Compare which tests are failing, flaky, pending, added, or modified between the source and base branches and prevent the merging of low-quality code."}),"\n",(0,s.jsxs)(n.p,{children:["A common scenario throughout the software development lifecycle (SDLC) is an engineer's ",(0,s.jsx)(n.strong,{children:"feature"})," branch that will be merged into the repo's ",(0,s.jsx)(n.strong,{children:"develop"})," or ",(0,s.jsx)(n.strong,{children:"main"})," branch."]}),"\n",(0,s.jsx)(i,{src:"/img/cloud/features/branch-review/branch-review.jpg",alt:"Cypress Branch Review"}),"\n",(0,s.jsxs)(n.p,{children:["Previously, pinpointing changes in your test suite's results required a manual side-by-side comparison between your newly-introduced branch's test runs and your base branch's test runs. This sub-optimal workflow often fails to answer the fundamental questions, ",(0,s.jsx)(n.em,{children:"what changed"})," and ",(0,s.jsx)(n.em,{children:"why?"})," You might be left wondering if the same tests are flaky between branches, when new failures were introduced, or if you added sufficient test coverage to your new branch."]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["Cypress Branch Review is currently only available for ",(0,s.jsx)(n.a,{href:"/cloud/integrations/source-control/github",children:"GitHub integrated projects"}),". We are working on adding support for GitLab and Bitbucket soon."]})}),"\n",(0,s.jsx)(n.h2,{id:"Getting-Started",children:"Getting Started"}),"\n",(0,s.jsxs)(n.p,{children:["Branch Review works by leveraging the Cypress Cloud GitHub integration to query the GitHub API for branches with pull requests. Your project will first need to be connected to a GitHub repository. If you haven't already, follow the steps in ",(0,s.jsx)(n.a,{href:"/cloud/integrations/source-control/github#Install-the-Cypress-GitHub-app",children:"Install the Cypress GitHub app"})," to connect your project to GitHub."]}),"\n",(0,s.jsx)(n.h3,{id:"Accessing-Branch-Review",children:"Accessing Branch Review"}),"\n",(0,s.jsxs)(n.p,{children:["To access Branch Review, navigate to the ",(0,s.jsx)(n.strong,{children:"Branches"})," tab in the left sidebar and select the branch you want to review. In order to see a comparison, the branch you select must have a pull request."]}),"\n",(0,s.jsx)(i,{src:"/img/cloud/features/branch-review/get-to-branch-review.jpg",alt:"Get to Branch Review",caption:"Active branches, shown with available PR # tags"}),"\n",(0,s.jsxs)(n.p,{children:["If you do not see PR # tags associated with a branch, you may need to ",(0,s.jsx)(n.a,{href:"/app/continuous-integration/overview#CI-Build-Information",children:"pass PR numbers"})," to runs as environment variables. This helps ensure Cypress Cloud can map PR data correctly."]}),"\n",(0,s.jsx)(n.h4,{id:"Latest-Runs",children:"Latest Runs"}),"\n",(0,s.jsxs)(n.p,{children:["If the selected branch has a PR associated and a PR # passed via CI, there is an additional callout on the top of the overview tab of the ",(0,s.jsx)(n.strong,{children:"Latest runs"})," page which directs to the Branch Review."]}),"\n",(0,s.jsx)(i,{src:"/img/cloud/features/branch-review/branch-review-available.png",alt:"Branch Review available banner"}),"\n",(0,s.jsx)(n.h2,{id:"Branch-Details",children:"Branch Details"}),"\n",(0,s.jsx)(n.h3,{id:"View-Options",children:"View Options"}),"\n",(0,s.jsx)(n.p,{children:'"Overview" is the default view of a branch for all projects.'}),"\n",(0,s.jsx)(i,{src:"/img/cloud/features/branch-review/branch-review-views.png",alt:"Displaying different views for branches"}),"\n",(0,s.jsxs)(n.admonition,{type:"note",children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Branch Overview"})}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Callouts for the latest available Branch Review or a reminder to create a pull request in order to compare test run results."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:'Click "Review changes" for the full Branch Review.'}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Click any test status to reveal those changes."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Latest runs of the current branch for contextual guidance on the state of its test runs."}),"\n"]}),"\n"]})]}),"\n",(0,s.jsx)(n.p,{children:'"Review" provides the detailed Branch Review insights for the branch\'s available pull requests, with the latest pull request selected by default.'}),"\n",(0,s.jsx)(n.p,{children:'"Runs" provides a list of all runs that are attributed to the current branch.'}),"\n",(0,s.jsx)(n.h3,{id:"Review-Header",children:"Review Header"}),"\n",(0,s.jsx)(n.p,{children:"The header includes the Git commit message, PR selector, PR status, and base and feature branch labels with the Cypress Cloud test run ID number (#)."}),"\n",(0,s.jsx)(n.p,{children:"If there are multiple pull requests open for the same branch, you can select the pull request you want to review from the dropdown to the right of the commit message."}),"\n",(0,s.jsxs)(n.p,{children:["Clicking the branch label will link you directly to the appropriate ",(0,s.jsx)(n.a,{href:"/cloud/features/recorded-runs#Overview-tab",children:"run overview"})," and hovering on these elements exposes additional run meta data."]}),"\n",(0,s.jsx)(i,{src:"/img/cloud/features/branch-review/branch-review-header.jpg",alt:"Branch Review Header"}),"\n",(0,s.jsx)(n.h3,{id:"Review-Test-Status",children:"Review Test Status"}),"\n",(0,s.jsx)(n.p,{children:"When on the review screen, you will see the Failures, Flaky, Pending, Added, and Modified tabs. Each tab will show you the specs that fall into that category. You can click on a test to view the test details."}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"If a run is missing on either the merge base or feature commit of the PR, a banner is displayed specifying which commit is missing the run with a link to it on GitHub."})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["Recording exactly one run for every commit as the best/only way to ensure complete and accurate comparisons. See our ",(0,s.jsx)(n.a,{href:"/cloud/features/branch-review#Best-Practices",children:"best practices"})," on grouping multiple ",(0,s.jsx)(n.code,{children:"cypress run"})," calls under one run."]})}),"\n",(0,s.jsx)(i,{src:"/img/cloud/features/branch-review/branch-review-details.jpg",alt:"Branch Review Details"}),"\n",(0,s.jsxs)(n.admonition,{type:"note",children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Review Test Status"})}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Review your PR information"}),"\n",(0,s.jsx)(n.li,{children:"Get a glance of changes in your branch across key statuses"}),"\n",(0,s.jsxs)(n.li,{children:["See what has changed in a specific status, for example:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)("img",{className:"br-ui inline-block",src:"/img/cloud/features/branch-review/test-status-up.png",alt:"up arrow and number 3 marked in red colored text"})," total number introduced in your branch"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)("img",{className:"br-ui inline-block",src:"/img/cloud/features/branch-review/test-status-down.png",alt:"down arrow and number 4 marked in green colored text"})," total number decreased or resolved in your branch"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)("img",{className:"br-ui inline-block",src:"/img/cloud/features/branch-review/test-status-total.png",alt:"number 4 marked in gray colored text"})," total count, for example, ",(0,s.jsx)(n.em,{children:"3 new and 1 existing"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["The test state (failed, flaky, pending) is also indicated at the spec level","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.em,{children:"new"})," = the state was ",(0,s.jsx)("u",{children:"not"})," previously captured, but now ",(0,s.jsx)("u",{children:"is"})," captured",(0,s.jsx)("br",{}),"(newly pending tests can imply an ",(0,s.jsx)(n.code,{children:"it.skip()"})," was not removed)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.em,{children:"existing"})," = the state ",(0,s.jsx)("u",{children:"was"})," previously captured and now ",(0,s.jsx)("u",{children:"is still"})," captured"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.em,{children:"resolved"})," = the state ",(0,s.jsx)("u",{children:"was"})," previously captured but now is ",(0,s.jsx)("u",{children:"no longer"})," captured"]}),"\n"]}),"\n"]}),"\n"]})]}),"\n",(0,s.jsx)(n.h3,{id:"Review-Test-Comparison",children:"Review Test Comparison"}),"\n",(0,s.jsx)(n.p,{children:"Navigating into the test detail view reveals a side-by-side comparison of the test results on both branches, as well as, artifacts so you can compare before vs. after your PR. This can help narrow the focus on changes introduced or resolved on either branch and elevate the source of flake within tests throughout different attempts. Review the test definition panel for diff snapshots to help quickly determine changes in test code."}),"\n",(0,s.jsx)(i,{src:"/img/cloud/features/branch-review/test-comparison.png",alt:"Test Comparison View"}),"\n",(0,s.jsxs)(n.admonition,{type:"note",children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Review Test Comparison"})}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Base branch results"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Feature branch results"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Test Replay and artifacts"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Test attempts (descending order)"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Code change diffs"}),"\n"]}),"\n"]})]}),"\n",(0,s.jsx)(n.h2,{id:"GitHub-Pull-Request-Comments",children:"GitHub Pull Request Comments"}),"\n",(0,s.jsxs)(n.p,{children:["The Cypress Cloud GitHub Integration offers detailed run information via ",(0,s.jsx)(n.a,{href:"/cloud/integrations/source-control/github#Pull-request-comments",children:"PR comments"}),'. Follow the "View all changes introduced in this branch" link to load the Branch Review between the feature and base branches.']}),"\n",(0,s.jsx)(i,{src:"/img/cloud/integrations/github/pr-comment-fail.jpg",alt:"Cypress GitHub App PR",width:800}),"\n",(0,s.jsx)(n.h2,{id:"Troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"Note-on-Available-Data",children:"Note on Available Data"}),"\n",(0,s.jsx)(n.p,{children:"Branch Review is a powerful tool to compare two branches with recorded runs to Cypress Cloud. There are factors that can impact what is available to review between a feature and base branch. For example, whether or not a branch at a particular commit has a run recorded to Cypress Cloud will affect what is displayed."}),"\n",(0,s.jsx)(n.p,{children:"The following captures this scenario across both branches:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"center"},children:"Base Branch"}),(0,s.jsx)(n.th,{style:{textAlign:"center"},children:"Feature Branch"}),(0,s.jsx)(n.th,{children:"What Branch Review Displays"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(t,{type:"success",children:"has run"})}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(t,{type:"success",children:"has run"})}),(0,s.jsx)(n.td,{children:"Comparison data using both found runs"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(t,{type:"success",children:"has run"})}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(t,{type:"danger",children:"no run"})}),(0,s.jsx)(n.td,{children:"Comparison data using last run on feature branch"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(t,{type:"danger",children:"no run"})}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(t,{type:"success",children:"has run"})}),(0,s.jsx)(n.td,{children:"Non-comparison data with found feature run"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(t,{type:"danger",children:"no run"})}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(t,{type:"danger",children:"no run"})}),(0,s.jsx)(n.td,{children:"Non-comparison data using last run on feature branch"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"Best-Practices",children:"Best Practices"}),"\n",(0,s.jsx)(n.h3,{id:"Grouping-Test-Runs",children:"Grouping Test Runs"}),"\n",(0,s.jsxs)(n.p,{children:["Cypress Cloud allows for ",(0,s.jsx)(n.a,{href:"/cloud/features/smart-orchestration/parallelization#Grouping-test-runs",children:"grouping recorded tests"})," together under a single run. This means multiple ",(0,s.jsx)(n.code,{children:"cypress run"})," calls can be labeled and associated to a single run in Cypress Cloud."]}),"\n",(0,s.jsxs)(n.p,{children:["Recording multiple test runs per commit without grouping will cause issues, as Branch Review relies on the ",(0,s.jsx)(n.em,{children:"latest"})," run. Therefore, recording one run per commit and utilizing grouping is essential to improving effectiveness and ensure an accurate comparison between branches."]}),"\n",(0,s.jsx)(n.h2,{id:"See-Also",children:"See Also"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Read about ",(0,s.jsx)(n.a,{href:"/cloud/account-management/projects#Multi-repo-Implementation",children:"multi-repo implementation"})," best practices in Cypress Cloud."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}function u(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},1151:(e,n,t)=>{t.d(n,{Z:()=>l,a:()=>a});var s=t(7294);const r={},i=s.createContext(r);function a(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);
"use strict";(self.webpackChunkcypress_docusaurus_zh=self.webpackChunkcypress_docusaurus_zh||[]).push([[7178],{2258:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>t,contentTitle:()=>r,default:()=>a,frontMatter:()=>c,metadata:()=>d,toc:()=>l});var n=i(5893),o=i(1151);const c={title:"setCookie"},r=void 0,d={id:"api/commands/setcookie",title:"setCookie",description:"Set a browser cookie.",source:"@site/docs/api/commands/setcookie.mdx",sourceDirName:"api/commands",slug:"/api/commands/setcookie",permalink:"/api/commands/setcookie",draft:!1,unlisted:!1,editUrl:"https://github.com/cypress-io/cypress-documentation/tree/main/docs/api/commands/setcookie.mdx",tags:[],version:"current",lastUpdatedAt:1732009455,formattedLastUpdatedAt:"Nov 19, 2024",frontMatter:{title:"setCookie"},sidebar:"api",previous:{title:"session",permalink:"/api/commands/session"},next:{title:"shadow",permalink:"/api/commands/shadow"}},t={},l=[{value:"Syntax",id:"Syntax",level:2},{value:"Usage",id:"Usage",level:3},{value:"Arguments",id:"Arguments",level:3},{value:"Yields <Icon></Icon>",id:"Yields",level:3},{value:"Examples",id:"Examples",level:2},{value:"Name Value",id:"Name-Value",level:3},{value:"Set a cookie",id:"Set-a-cookie",level:4},{value:"Rules",id:"Rules",level:2},{value:"Requirements <Icon></Icon>",id:"Requirements",level:3},{value:"Assertions <Icon></Icon>",id:"Assertions",level:3},{value:"Timeouts <Icon></Icon>",id:"Timeouts",level:3},{value:"Command Log",id:"Command-Log",level:2},{value:"History",id:"History",level:2},{value:"See also",id:"See-also",level:2}];function h(e){const s={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.a)(),...e.components},{DocsImage:i,Icon:c}=s;return i||x("DocsImage",!0),c||x("Icon",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.p,{children:"Set a browser cookie."}),"\n",(0,n.jsx)(s.h2,{id:"Syntax",children:"Syntax"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-javascript",children:"cy.setCookie(name, value)\ncy.setCookie(name, value, options)\n"})}),"\n",(0,n.jsx)(s.h3,{id:"Usage",children:"Usage"}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(c,{name:"check-circle",color:"green"})," ",(0,n.jsx)(s.strong,{children:"Correct Usage"})]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-javascript",children:"cy.setCookie('auth_key', '123key') // Set the 'auth_key' cookie to '123key'\n"})}),"\n",(0,n.jsx)(s.h3,{id:"Arguments",children:"Arguments"}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(c,{name:"angle-right"})," ",(0,n.jsxs)(s.strong,{children:["name ",(0,n.jsx)(s.em,{children:"(String)"})]})]}),"\n",(0,n.jsx)(s.p,{children:"The name of the cookie to set."}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(c,{name:"angle-right"})," ",(0,n.jsxs)(s.strong,{children:["value ",(0,n.jsx)(s.em,{children:"(String)"})]})]}),"\n",(0,n.jsx)(s.p,{children:"The value of the cookie to set."}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(c,{name:"angle-right"})," ",(0,n.jsxs)(s.strong,{children:["options ",(0,n.jsx)(s.em,{children:"(Object)"})]})]}),"\n",(0,n.jsxs)(s.p,{children:["Pass in an options object to change the default behavior of ",(0,n.jsx)(s.code,{children:"cy.setCookie()"}),"."]}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Option"}),(0,n.jsx)(s.th,{children:"Default"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"log"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"true"})}),(0,n.jsxs)(s.td,{children:["Displays the command in the ",(0,n.jsx)(s.a,{href:"/app/core-concepts/open-mode#Command-Log",children:"Command log"})]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"domain"})}),(0,n.jsx)(s.td,{children:"Hostname of the current URL"}),(0,n.jsx)(s.td,{children:"The domain the cookie is visible to"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"expiry"})}),(0,n.jsx)(s.td,{children:"20 years into the future"}),(0,n.jsxs)(s.td,{children:["When the cookie expires, specified in seconds since ",(0,n.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Unix_time",children:"Unix Epoch"}),"."]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"hostOnly"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"false"})}),(0,n.jsx)(s.td,{children:"Whether the cookie is a host-only cookie, (i.e. the request's host must exactly match the domain of the cookie)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"httpOnly"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"false"})}),(0,n.jsx)(s.td,{children:"Whether the cookie is an HTTP only cookie"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"path"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"/"})}),(0,n.jsx)(s.td,{children:"The cookie path"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"secure"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"false"})}),(0,n.jsx)(s.td,{children:"Whether the cookie is a secure cookie"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"timeout"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"/app/references/configuration#Timeouts",children:(0,n.jsx)(s.code,{children:"responseTimeout"})})}),(0,n.jsxs)(s.td,{children:["Time to wait for ",(0,n.jsx)(s.code,{children:"cy.setCookie()"})," to resolve before ",(0,n.jsx)(s.a,{href:"#Timeouts",children:"timing out"})]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"sameSite"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"undefined"})}),(0,n.jsxs)(s.td,{children:["Cookie's SameSite value. If set, should be one of ",(0,n.jsx)(s.code,{children:"lax"}),", ",(0,n.jsx)(s.code,{children:"strict"}),", or ",(0,n.jsx)(s.code,{children:"no_restriction"}),". Pass ",(0,n.jsx)(s.code,{children:"undefined"})," to use the browser's default. Note: ",(0,n.jsx)(s.code,{children:"no_restriction"})," can only be used if the ",(0,n.jsx)(s.code,{children:"secure"})," flag is set to ",(0,n.jsx)(s.code,{children:"true"}),"."]})]})]})]}),"\n",(0,n.jsxs)(s.h3,{id:"Yields",children:["Yields ",(0,n.jsx)(s.a,{href:"/app/core-concepts/introduction-to-cypress#Subject-Management",children:(0,n.jsx)(c,{name:"question-circle"})})]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"cy.setCookie()"})," yields a cookie object with the following properties:"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"domain"})}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"expiry"})," ",(0,n.jsx)(s.em,{children:"(if specified)"})]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"hostOnly"})," ",(0,n.jsx)(s.em,{children:"(if specified)"})]}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"httpOnly"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"name"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"path"})}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"sameSite"})," ",(0,n.jsx)(s.em,{children:"(if specified)"})]}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"secure"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"value"})}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"Examples",children:"Examples"}),"\n",(0,n.jsx)(s.h3,{id:"Name-Value",children:"Name Value"}),"\n",(0,n.jsx)(s.h4,{id:"Set-a-cookie",children:"Set a cookie"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-javascript",children:"cy.getCookies().should('be.empty')\ncy.setCookie('session_id', '189jd09sufh33aaiidhf99d09')\ncy.getCookie('session_id').should(\n  'have.property',\n  'value',\n  '189jd09sufh33aaiidhf99d09'\n)\n"})}),"\n",(0,n.jsx)(s.h2,{id:"Rules",children:"Rules"}),"\n",(0,n.jsxs)(s.h3,{id:"Requirements",children:["Requirements ",(0,n.jsx)(s.a,{href:"/app/core-concepts/introduction-to-cypress#Chains-of-Commands",children:(0,n.jsx)(c,{name:"question-circle"})})]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"cy.setCookie()"})," requires being chained off of ",(0,n.jsx)(s.code,{children:"cy"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"Assertions",children:["Assertions ",(0,n.jsx)(s.a,{href:"/app/core-concepts/introduction-to-cypress#Assertions",children:(0,n.jsx)(c,{name:"question-circle"})})]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"cy.setCookie()"})," will only run assertions you have chained once, and will not\n",(0,n.jsx)(s.a,{href:"/app/core-concepts/retry-ability",children:"retry"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"Timeouts",children:["Timeouts ",(0,n.jsx)(s.a,{href:"/app/core-concepts/introduction-to-cypress#Timeouts",children:(0,n.jsx)(c,{name:"question-circle"})})]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"cy.setCookie()"})," should never time out."]}),"\n"]}),"\n",(0,n.jsx)(s.admonition,{type:"caution",children:(0,n.jsxs)(s.p,{children:["Because ",(0,n.jsx)(s.code,{children:"cy.setCookie()"})," is asynchronous it is technically possible for there to\nbe a timeout while talking to the internal Cypress automation APIs. But for\npractical purposes it should never happen."]})}),"\n",(0,n.jsx)(s.h2,{id:"Command-Log",children:"Command Log"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-javascript",children:"cy.getCookies().should('be.empty')\ncy.setCookie('fakeCookie1', '123ABC')\ncy.getCookie('fakeCookie1').should('have.property', 'value', '123ABC')\n"})}),"\n",(0,n.jsx)(s.p,{children:"The commands above will display in the Command Log as:"}),"\n",(0,n.jsx)(i,{src:"/img/api/setcookie/set-cookie-on-browser-for-testing.png",alt:"Command Log setcookie"}),"\n",(0,n.jsxs)(s.p,{children:["When clicking on ",(0,n.jsx)(s.code,{children:"setCookie"})," within the command log, the console outputs the\nfollowing:"]}),"\n",(0,n.jsx)(i,{src:"/img/api/setcookie/see-cookie-properties-expiry-domain-and-others-in-test.png",alt:"Console Log setcookie"}),"\n",(0,n.jsx)(s.h2,{id:"History",children:"History"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Version"}),(0,n.jsx)(s.th,{children:"Changes"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"/app/references/changelog#12-7-0",children:"12.7.0"})}),(0,n.jsxs)(s.td,{children:["Support ",(0,n.jsx)(s.code,{children:"hostOnly"})," option for a given domain."]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"/app/references/changelog#5-0-0",children:"5.0.0"})}),(0,n.jsxs)(s.td,{children:["Removed ",(0,n.jsx)(s.code,{children:"experimentalGetCookiesSameSite"})," and made ",(0,n.jsx)(s.code,{children:"sameSite"})," property always available."]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"/app/references/changelog#4-3-0",children:"4.3.0"})}),(0,n.jsxs)(s.td,{children:["Added ",(0,n.jsx)(s.code,{children:"sameSite"})," property when the ",(0,n.jsx)(s.a,{href:"/app/references/configuration#Experiments",children:"experimentalGetCookiesSameSite"})," configuration value is ",(0,n.jsx)(s.code,{children:"true"}),"."]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"/app/references/changelog#0-16-0",children:"0.16.0"})}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"cy.setCookie()"})," command added"]})]})]})]}),"\n",(0,n.jsx)(s.h2,{id:"See-also",children:"See also"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"/api/commands/clearcookie",children:(0,n.jsx)(s.code,{children:"cy.clearCookie()"})})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"/api/commands/clearcookies",children:(0,n.jsx)(s.code,{children:"cy.clearCookies()"})})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"/api/commands/getcookie",children:(0,n.jsx)(s.code,{children:"cy.getCookie()"})})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"/api/commands/getcookies",children:(0,n.jsx)(s.code,{children:"cy.getCookies()"})})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"/api/cypress-api/cookies",children:(0,n.jsx)(s.code,{children:"Cypress.Cookies.debug()"})})}),"\n"]})]})}function a(e={}){const{wrapper:s}={...(0,o.a)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}function x(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},1151:(e,s,i)=>{i.d(s,{Z:()=>d,a:()=>r});var n=i(7294);const o={},c=n.createContext(o);function r(e){const s=n.useContext(c);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),n.createElement(c.Provider,{value:s},e.children)}}}]);
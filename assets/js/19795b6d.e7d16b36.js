"use strict";(self.webpackChunkcypress_docusaurus_zh=self.webpackChunkcypress_docusaurus_zh||[]).push([[533],{5458:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>c});var a=s(5893),n=s(1151);const i={title:"Flaky Test Management",sidebar_position:60,sidebar_label:"Flake Management"},l=void 0,r={id:"cloud/features/flaky-test-management",title:"Flaky Test Management",description:"What you'll learn",source:"@site/docs/cloud/features/flaky-test-management.mdx",sourceDirName:"cloud/features",slug:"/cloud/features/flaky-test-management",permalink:"/cloud/features/flaky-test-management",draft:!1,unlisted:!1,editUrl:"https://github.com/cypress-io/cypress-documentation/tree/main/docs/cloud/features/flaky-test-management.mdx",tags:[],version:"current",lastUpdatedAt:1732009455,formattedLastUpdatedAt:"Nov 19, 2024",sidebarPosition:60,frontMatter:{title:"Flaky Test Management",sidebar_position:60,sidebar_label:"Flake Management"},sidebar:"cloud",previous:{title:"Branch Review",permalink:"/cloud/features/branch-review"},next:{title:"Overview",permalink:"/cloud/features/smart-orchestration/overview"}},o={},c=[{value:"<Icon></Icon> What you&#39;ll learn",id:"What-youll-learn",level:5},{value:"Flake Detection",id:"Flake-Detection",level:2},{value:"Enable test retries",id:"Enable-test-retries",level:3},{value:"Flagging Flaky Tests",id:"Flagging-Flaky-Tests",level:3},{value:"Flaky Test Analytics",id:"Flaky-Test-Analytics",level:3},{value:"Failure Rate vs Flake Rate",id:"Failure-Rate-vs-Flake-Rate",level:3},{value:"Flake Alerting",id:"Flake-Alerting",level:2},{value:"GitHub",id:"GitHub",level:3},{value:"Slack",id:"Slack",level:3},{value:"See Also",id:"See-Also",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h5:"h5",li:"li",p:"p",strong:"strong",ul:"ul",...(0,n.a)(),...e.components},{DocsImage:s,Icon:i}=t;return s||u("DocsImage",!0),i||u("Icon",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.admonition,{type:"info",children:[(0,a.jsxs)(t.h5,{id:"What-youll-learn",children:[(0,a.jsx)(i,{name:"question-circle",color:"#4BBFD2"})," What you'll learn"]}),(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"How to detect and manage flaky tests in Cypress Cloud"}),"\n",(0,a.jsx)(t.li,{children:"How to enable flake detection and alerting"}),"\n",(0,a.jsx)(t.li,{children:"The benefits of using flaky test management features"}),"\n"]})]}),"\n",(0,a.jsxs)(t.p,{children:["By enabling ",(0,a.jsx)(t.a,{href:"/app/guides/test-retries",children:"test retries"}),", Cypress Cloud can\ndetect, flag, and track flaky tests from your recorded Cypress test runs in your\nCI/CD pipeline."]}),"\n",(0,a.jsxs)(t.p,{children:["A test is considered to be ",(0,a.jsx)(t.strong,{children:"flaky"})," when it can pass and fail across multiple\nretry attempts without any code changes. For example, a test is executed and fails, then the test is executed again,\nwithout any change to the code, but this time it passes."]}),"\n",(0,a.jsxs)(t.admonition,{type:"info",children:[(0,a.jsx)("strong",{children:"What are test retries?"}),(0,a.jsxs)(t.p,{children:["Cypress has the ability to automatically\n",(0,a.jsx)(t.a,{href:"/app/guides/test-retries#Configure-Test-Retries",children:"retry failed tests"})," to\nmitigate flaky tests from failing entire test runs or CI builds."]})]}),"\n",(0,a.jsx)(t.h2,{id:"Flake-Detection",children:"Flake Detection"}),"\n",(0,a.jsxs)(t.admonition,{type:"tip",children:[(0,a.jsxs)(t.p,{children:[(0,a.jsx)(i,{name:"star"})," ",(0,a.jsx)(t.strong,{children:"Premium Cypress Cloud Feature"})]}),(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Test flake detection"})," is available to users with a\n",(0,a.jsx)(t.a,{href:"https://cypress.io/pricing",children:"Team Cypress Cloud plan"}),"."]})]}),"\n",(0,a.jsx)(t.p,{children:"One way to battle flaky tests is to detect and monitor them as they occur in an\norganized and methodical manner such that you can assess their severity to\nassist with prioritizing their fix."}),"\n",(0,a.jsx)(t.h3,{id:"Enable-test-retries",children:"Enable test retries"}),"\n",(0,a.jsxs)(t.p,{children:["Test retries is the ",(0,a.jsx)(t.em,{children:"fundamental mechanism"})," that enables the detection of flaky\ntests by Cypress Cloud. Therefore, ",(0,a.jsxs)(t.strong,{children:["enabling\n",(0,a.jsx)(t.a,{href:"/app/guides/test-retries#Configure-Test-Retries",children:"test retries"})," is required"]}),"\nto take advantage of any flaky test management feature."]}),"\n",(0,a.jsx)(t.admonition,{type:"caution",children:(0,a.jsxs)(t.p,{children:["If you want more control over the pass/fail result of any test deemed flaky by test retries, you may want to use ",(0,a.jsx)(t.a,{href:"/app/references/experiments#Experimental-Flake-Detection-Features",children:"experimental test retries"}),", which is available as of Cypress ",(0,a.jsx)(t.code,{children:"13.4.0"}),"."]})}),"\n",(0,a.jsx)(t.h3,{id:"Flagging-Flaky-Tests",children:"Flagging Flaky Tests"}),"\n",(0,a.jsx)(t.p,{children:'Test runs with flaky tests will be flagged with the number of flaky of tests\nwithin Cypress Cloud "Latest runs" page. Flaky tests runs can also be filtered\nin and out via the "Flaky" filter within this page.'}),"\n",(0,a.jsx)(s,{src:"/img/cloud/features/flaky-test-management/flaky-runs-view.png",alt:"Flagging flaky tests runs in Cypress Cloud"}),"\n",(0,a.jsx)(t.p,{children:"Any failure across multiple test run attempts triggered by test retrying will\nresult in a given test case to be flagged as flaky."}),"\n",(0,a.jsx)(t.h3,{id:"Flaky-Test-Analytics",children:"Flaky Test Analytics"}),"\n",(0,a.jsxs)(t.admonition,{type:"tip",children:[(0,a.jsxs)(t.p,{children:[(0,a.jsx)(i,{name:"star"})," ",(0,a.jsx)(t.strong,{children:"Premium Cypress Cloud Feature"})]}),(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Test flake analytics"})," are available to users with a\n",(0,a.jsx)(t.a,{href:"https://cypress.io/pricing",children:"Team Cypress Cloud plan"}),"."]})]}),"\n",(0,a.jsx)(t.p,{children:"The flaky tests analytics page provides a birds-eye-view on the state of flake\nwithin your project by showing:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["Plot of the ",(0,a.jsx)(t.strong,{children:"number of flaky tests over time"}),"."]}),"\n",(0,a.jsxs)(t.li,{children:["Overall ",(0,a.jsx)(t.strong,{children:"flakiness level"})," of the entire project."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Number of flake tests"})," grouped by their severity."]}),"\n",(0,a.jsxs)(t.li,{children:["Filterable ",(0,a.jsx)(t.strong,{children:"log of all flaky test"})," cases ordered by severity."]}),"\n"]}),"\n",(0,a.jsxs)(t.admonition,{type:"info",children:[(0,a.jsx)("strong",{children:"Flake Severity"}),(0,a.jsxs)(t.p,{children:["Test flake ",(0,a.jsx)(t.strong,{children:"severity"})," is determined by the frequency of flake or the ",(0,a.jsx)(t.strong,{children:"flake\nrate"})," of a given test. Flake severity level can be used to prioritize the work\nneeded to resolve flake issues."]})]}),"\n",(0,a.jsx)(s,{src:"/img/cloud/features/flaky-test-management/flake-analytics.png",alt:"Flaky tests analytics"}),"\n",(0,a.jsx)(t.p,{children:"Selecting any of the flaky test cases in the analytics page will reveal a test\ncase details panel that shows:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Historical log of latest flaky runs"}),"\n",(0,a.jsx)(t.li,{children:"Most common errors across the runs of the test case"}),"\n",(0,a.jsx)(t.li,{children:"Related test case changelog"}),"\n",(0,a.jsx)(t.li,{children:"Plot of failure rate and flaky rate over time."}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"All these test case level details provide deeper context around the occurrences\nof flake over time to assist with debugging the root cause."}),"\n",(0,a.jsx)(s,{src:"/img/cloud/features/flaky-test-management/flake-panel.png",alt:"Flaky tests analytics details panel"}),"\n",(0,a.jsx)(t.h3,{id:"Failure-Rate-vs-Flake-Rate",children:"Failure Rate vs Flake Rate"}),"\n",(0,a.jsx)(t.p,{children:"It is important to understand the distinction between failure rate and flake\nrate when test retries is enabled. These two metrics are tracked over time for\neach flaky test case within the flaky tests analytics page:"}),"\n",(0,a.jsx)(s,{src:"/img/cloud/features/flaky-test-management/flake-v-fail-2.png",alt:"flake rate vs fail rate"}),"\n",(0,a.jsx)(t.p,{children:"A test case flagged as flaky could have still passed after multiple test retry\nattempts. The test result status of individual test retry attempts is separate\nand distinct from the final test status."}),"\n",(0,a.jsx)(t.p,{children:"For example, a project is configured to retry failing tests up to 3 times. The\nfirst two attempts fail, but the last and third attempt passes, resulting in a\nfinal status of passing."}),"\n",(0,a.jsx)(t.p,{children:"With this concept in mind, it is possible to always have zero final failure rate\nwhile exhibiting flake as demonstrated below:"}),"\n",(0,a.jsx)(s,{src:"/img/cloud/features/flaky-test-management/flake-v-fail-1.png",alt:"flake rate vs fail rate"}),"\n",(0,a.jsx)(t.h2,{id:"Flake-Alerting",children:"Flake Alerting"}),"\n",(0,a.jsxs)(t.admonition,{type:"tip",children:[(0,a.jsxs)(t.p,{children:[(0,a.jsx)(i,{name:"star"})," ",(0,a.jsx)(t.strong,{children:"Premium Cypress Cloud Feature"})]}),(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Test flake alerting"})," is available to users with a\n",(0,a.jsx)(t.a,{href:"https://cypress.io/pricing",children:"Team Cypress Cloud plan"}),"."]})]}),"\n",(0,a.jsxs)(t.p,{children:["Cypress Cloud can provide alerts via source control (",(0,a.jsx)(t.a,{href:"/cloud/integrations/source-control/github",children:"GitHub"}),", ",(0,a.jsx)(t.a,{href:"/cloud/integrations/source-control/gitlab",children:"GitLab"}),", ",(0,a.jsx)(t.a,{href:"/cloud/integrations/source-control/bitbucket",children:"BitBucket"}),"), ",(0,a.jsx)(t.a,{href:"/cloud/integrations/slack",children:"Slack"}),", and ",(0,a.jsx)(t.a,{href:"/cloud/integrations/teams",children:"Microsoft Teams"})," integrations to further assist with\nstaying on top of flake occurrences."]}),"\n",(0,a.jsx)(t.h3,{id:"GitHub",children:"GitHub"}),"\n",(0,a.jsx)(t.p,{children:"Flake alerting via GitHub PR comments and status checks can be enabled within a\nproject's GitHub integration settings:"}),"\n",(0,a.jsx)(s,{src:"/img/cloud/features/flaky-test-management/gh-flake.png",alt:"GitHub flake alert settings"}),"\n",(0,a.jsx)(t.p,{children:'After enabling GitHub flake alerting, GitHub PR comments will show the number of\nflaky tests associated with the PR within the test summary, and include a\n"Flakiness" section highlighting the specific tests that flaked.'}),"\n",(0,a.jsx)(s,{src:"/img/cloud/features/flaky-test-management/flake-pr-comment.png",alt:"GitHub flake alert pr comment"}),"\n",(0,a.jsx)(t.h3,{id:"Slack",children:"Slack"}),"\n",(0,a.jsx)(t.p,{children:"Flake alerting via Slack can be enabled within Slack integration settings:"}),"\n",(0,a.jsx)(s,{src:"/img/cloud/features/flaky-test-management/slack-flake.png",alt:"Slack flake alert settings"}),"\n",(0,a.jsx)(t.p,{children:"After enabling Slack alerts, Cypress Cloud will send Slack messages whenever\nflaky tests are detected:"}),"\n",(0,a.jsx)(s,{src:"/img/cloud/features/flaky-test-management/flake-slack-alert.png",alt:"Slack flake alert"}),"\n",(0,a.jsx)(t.h2,{id:"See-Also",children:"See Also"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["Read our blog posts about fighting\n",(0,a.jsx)(t.a,{href:"https://cypress.io/blog/tag/flake/",children:"the test flake"}),"."]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,n.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}function u(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},1151:(e,t,s)=>{s.d(t,{Z:()=>r,a:()=>l});var a=s(7294);const n={},i=a.createContext(n);function l(e){const t=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:l(e.components),a.createElement(i.Provider,{value:t},e.children)}}}]);
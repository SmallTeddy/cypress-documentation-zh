"use strict";(self.webpackChunkcypress_docusaurus_zh=self.webpackChunkcypress_docusaurus_zh||[]).push([[1978],{2858:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>d});var s=i(5893),o=i(1151);const c={title:"getCookie"},t=void 0,r={id:"api/commands/getcookie",title:"getCookie",description:"Get a browser cookie by its name.",source:"@site/docs/api/commands/getcookie.mdx",sourceDirName:"api/commands",slug:"/api/commands/getcookie",permalink:"/api/commands/getcookie",draft:!1,unlisted:!1,editUrl:"https://github.com/cypress-io/cypress-documentation/tree/main/docs/api/commands/getcookie.mdx",tags:[],version:"current",lastUpdatedAt:1732009455,formattedLastUpdatedAt:"Nov 19, 2024",frontMatter:{title:"getCookie"},sidebar:"api",previous:{title:"getAllSessionStorage",permalink:"/api/commands/getallsessionstorage"},next:{title:"getCookies",permalink:"/api/commands/getcookies"}},l={},d=[{value:"Syntax",id:"Syntax",level:2},{value:"Usage",id:"Usage",level:3},{value:"Arguments",id:"Arguments",level:3},{value:"Yields <Icon></Icon>",id:"Yields",level:3},{value:"When a cookie matching the name could not be found:",id:"When-a-cookie-matching-the-name-could-not-be-found",level:4},{value:"Examples",id:"Examples",level:2},{value:"Session id",id:"Session-id",level:3},{value:"Get <code>session_id</code> cookie after logging in",id:"Get-session_id-cookie-after-logging-in",level:4},{value:"Using <code>cy.getCookie()</code> to test logging in",id:"Using-cygetCookie-to-test-logging-in",level:4},{value:"Rules",id:"Rules",level:2},{value:"Requirements <Icon></Icon>",id:"Requirements",level:3},{value:"Assertions <Icon></Icon>",id:"Assertions",level:3},{value:"Timeouts <Icon></Icon>",id:"Timeouts",level:3},{value:"Command Log",id:"Command-Log",level:2},{value:"History",id:"History",level:2},{value:"See also",id:"See-also",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.a)(),...e.components},{DocsImage:i,Icon:c}=n;return i||x("DocsImage",!0),c||x("Icon",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Get a browser cookie by its name."}),"\n",(0,s.jsx)(n.h2,{id:"Syntax",children:"Syntax"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"cy.getCookie(name)\ncy.getCookie(name, options)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"Usage",children:"Usage"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(c,{name:"check-circle",color:"green"})," ",(0,s.jsx)(n.strong,{children:"Correct Usage"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"cy.getCookie('auth_key') // Get cookie with name 'auth_key'\n"})}),"\n",(0,s.jsx)(n.h3,{id:"Arguments",children:"Arguments"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(c,{name:"angle-right"})," ",(0,s.jsxs)(n.strong,{children:["name ",(0,s.jsx)(n.em,{children:"(String)"})]})]}),"\n",(0,s.jsx)(n.p,{children:"The name of the cookie to get. Required."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(c,{name:"angle-right"})," ",(0,s.jsxs)(n.strong,{children:["options ",(0,s.jsx)(n.em,{children:"(Object)"})]})]}),"\n",(0,s.jsxs)(n.p,{children:["Pass in an options object to change the default behavior of ",(0,s.jsx)(n.code,{children:"cy.getCookie()"}),"."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Option"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"domain"})}),(0,s.jsx)(n.td,{children:"Hostname of the current URL"}),(0,s.jsx)(n.td,{children:"Retrieves the cookie from the specified domain"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"log"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"true"})}),(0,s.jsxs)(n.td,{children:["Displays the command in the ",(0,s.jsx)(n.a,{href:"/app/core-concepts/open-mode#Command-Log",children:"Command log"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"timeout"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/app/references/configuration#Timeouts",children:(0,s.jsx)(n.code,{children:"responseTimeout"})})}),(0,s.jsxs)(n.td,{children:["Time to wait for ",(0,s.jsx)(n.code,{children:"cy.getCookie()"})," to resolve before ",(0,s.jsx)(n.a,{href:"#Timeouts",children:"timing out"})]})]})]})]}),"\n",(0,s.jsxs)(n.h3,{id:"Yields",children:["Yields ",(0,s.jsx)(n.a,{href:"/app/core-concepts/introduction-to-cypress#Subject-Management",children:(0,s.jsx)(c,{name:"question-circle"})})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"cy.getCookie()"})," yields a cookie object with the following properties:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"domain"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"expiry"})," ",(0,s.jsx)(n.em,{children:"(if specified)"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"hostOnly"})," ",(0,s.jsx)(n.em,{children:"(if specified)"})]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"httpOnly"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"name"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"path"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"sameSite"})," ",(0,s.jsx)(n.em,{children:"(if specified)"})]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"secure"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"value"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"cy.getCookie()"})," is not a query. It will not retry, or wait for the requested\ncookie to exist."]}),"\n",(0,s.jsx)(n.h4,{id:"When-a-cookie-matching-the-name-could-not-be-found",children:"When a cookie matching the name could not be found:"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"cy.getCookie()"})," yields ",(0,s.jsx)(n.code,{children:"null"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"Examples",children:"Examples"}),"\n",(0,s.jsx)(n.h3,{id:"Session-id",children:"Session id"}),"\n",(0,s.jsxs)(n.h4,{id:"Get-session_id-cookie-after-logging-in",children:["Get ",(0,s.jsx)(n.code,{children:"session_id"})," cookie after logging in"]}),"\n",(0,s.jsx)(n.p,{children:"In this example, on first login, our server sends us back a session cookie."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// assume we just logged in\ncy.contains('Login').click()\ncy.url().should('include', 'profile')\n// retries until cookie with value=189jd09su\n// is found or default command timeout ends\ncy.getCookie('session_id')\n  .should('have.property', 'value', '189jd09su')\n  .then((cookie) => {\n    // cookie is an object with \"domain\", \"name\" and other properties\n  })\n"})}),"\n",(0,s.jsx)(n.p,{children:"You can check the cookie existence without comparing any of its properties"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"cy.getCookie('my-session-cookie').should('exist')\n"})}),"\n",(0,s.jsx)(n.p,{children:"If you need the cookie value, for example to use in a subsequent call"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"let cookie\n\ncy.getCookie('session_id')\n  .should('exist')\n  .then((c) => {\n    // save cookie until we need it\n    cookie = c\n  })\n\n// some time later, force the \"cy.request\"\n// to run ONLY after the cookie has been set\n// by placing it inside \".then\"\ncy.get('#submit')\n  .click()\n  .then(() => {\n    cy.request({\n      url: '/api/admin',\n      headers: {\n        'my-token-x': cookie.value,\n      },\n    })\n  })\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"Using-cygetCookie-to-test-logging-in",children:["Using ",(0,s.jsx)(n.code,{children:"cy.getCookie()"})," to test logging in"]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["Check out our example recipes using ",(0,s.jsx)(n.code,{children:"cy.getCookie()"})," to test\n",(0,s.jsx)(n.a,{href:"/app/references/recipes#Logging-In",children:"logging in using HTML web forms"}),",\n",(0,s.jsx)(n.a,{href:"/app/references/recipes#Logging-In",children:"logging in using XHR web forms"})," and\n",(0,s.jsx)(n.a,{href:"/app/references/recipes#Logging-In",children:"logging in with single sign on"})]})}),"\n",(0,s.jsx)(n.h2,{id:"Rules",children:"Rules"}),"\n",(0,s.jsxs)(n.h3,{id:"Requirements",children:["Requirements ",(0,s.jsx)(n.a,{href:"/app/core-concepts/introduction-to-cypress#Chains-of-Commands",children:(0,s.jsx)(c,{name:"question-circle"})})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"cy.getCookie()"})," requires being chained off of ",(0,s.jsx)(n.code,{children:"cy"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"Assertions",children:["Assertions ",(0,s.jsx)(n.a,{href:"/app/core-concepts/introduction-to-cypress#Assertions",children:(0,s.jsx)(c,{name:"question-circle"})})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"cy.getCookie()"})," will only run assertions you have chained once, and will not\n",(0,s.jsx)(n.a,{href:"/app/core-concepts/retry-ability",children:"retry"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"Timeouts",children:["Timeouts ",(0,s.jsx)(n.a,{href:"/app/core-concepts/introduction-to-cypress#Timeouts",children:(0,s.jsx)(c,{name:"question-circle"})})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"cy.getCookie()"})," should never time out."]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsxs)(n.p,{children:["Because ",(0,s.jsx)(n.code,{children:"cy.getCookie()"})," is asynchronous it is technically possible for there to\nbe a timeout while talking to the internal Cypress automation APIs. But for\npractical purposes it should never happen."]})}),"\n",(0,s.jsx)(n.h2,{id:"Command-Log",children:"Command Log"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"cy.getCookie('fakeCookie1').should('have.property', 'value', '123ABC')\n"})}),"\n",(0,s.jsx)(n.p,{children:"The commands above will display in the Command Log as:"}),"\n",(0,s.jsx)(i,{src:"/img/api/getcookie/get-browser-cookie-and-make-assertions-about-object.png",alt:"Command Log getcookie"}),"\n",(0,s.jsxs)(n.p,{children:["When clicking on ",(0,s.jsx)(n.code,{children:"getCookie"})," within the command log, the console outputs the\nfollowing:"]}),"\n",(0,s.jsx)(i,{src:"/img/api/getcookie/inspect-cookie-object-properties-in-console.png",alt:"Console Log getcookie"}),"\n",(0,s.jsx)(n.h2,{id:"History",children:"History"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Version"}),(0,s.jsx)(n.th,{children:"Changes"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/app/references/changelog#5-0-0",children:"5.0.0"})}),(0,s.jsxs)(n.td,{children:["Removed ",(0,s.jsx)(n.code,{children:"experimentalGetCookiesSameSite"})," and made ",(0,s.jsx)(n.code,{children:"sameSite"})," property always available."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"/app/references/changelog#4-3-0",children:"4.3.0"})}),(0,s.jsxs)(n.td,{children:["Added ",(0,s.jsx)(n.code,{children:"sameSite"})," property when the ",(0,s.jsx)(n.code,{children:"experimentalGetCookiesSameSite"})," configuration value is ",(0,s.jsx)(n.code,{children:"true"}),"."]})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"See-also",children:"See also"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/api/cypress-api/cookies",children:"Cypress Cookies API"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/api/commands/clearcookie",children:(0,s.jsx)(n.code,{children:"cy.clearCookie()"})})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/api/commands/clearcookies",children:(0,s.jsx)(n.code,{children:"cy.clearCookies()"})})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/api/commands/getcookies",children:(0,s.jsx)(n.code,{children:"cy.getCookies()"})})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/api/commands/setcookie",children:(0,s.jsx)(n.code,{children:"cy.setCookie()"})})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/api/cypress-api/cookies",children:(0,s.jsx)(n.code,{children:"Cypress.Cookies.debug()"})})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}function x(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},1151:(e,n,i)=>{i.d(n,{Z:()=>r,a:()=>t});var s=i(7294);const o={},c=s.createContext(o);function t(e){const n=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);